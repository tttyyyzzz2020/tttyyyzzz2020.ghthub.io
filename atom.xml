<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>tttyyyzzz2020</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://tttyyyzzz2020.ghthub.io/"/>
  <updated>2020-08-30T02:56:47.941Z</updated>
  <id>http://tttyyyzzz2020.ghthub.io/</id>
  
  <author>
    <name>yongzhan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Combine数据状态管理基础</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/19/SwiftUI-StateManager/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/19/SwiftUI-StateManager/</id>
    <published>2020-08-19T10:51:20.000Z</published>
    <updated>2020-08-30T02:56:47.941Z</updated>
    
    <content type="html"><![CDATA[<p>学习combine 数据管理，需要先学习属性包装@PropertyWrapper</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span>              页面状态数据</span><br><span class="line">@<span class="type">Binding</span>            页面数据双向绑定</span><br><span class="line">@<span class="type">ObservedObject</span>    共享数据对象   （引用）</span><br><span class="line">@<span class="type">StateObject</span>       共享数据对象   （创建）</span><br><span class="line">@<span class="type">EnvironmentObject</span>   全局数据对象</span><br><span class="line">@<span class="type">Environment</span>         系统数据</span><br></pre></td></tr></table></figure><h2 id="数据响应和绑定"><a href="#数据响应和绑定" class="headerlink" title="数据响应和绑定"></a>数据响应和绑定</h2><blockquote><p>@State 修饰符 将数据转为响应式的状态，数据的跟新可驱动视图的变化</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SignupView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> handler: (<span class="type">User</span>) -&gt; <span class="type">Void</span></span><br><span class="line">    </span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> username = <span class="string">""</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> email = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@Binding 修饰符 数据进行双向绑定, 子视图不用拥有数据本省，可接受父视图传递共享</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ProfileEditingView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> user: <span class="type">User</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">"Username"</span>, text: $user.username)</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">"Email"</span>, text: $user.email)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多个页面数据共享怎么处理？"><a href="#多个页面数据共享怎么处理？" class="headerlink" title="多个页面数据共享怎么处理？"></a>多个页面数据共享怎么处理？</h2><blockquote><p>使用 <code>ObservableObject</code> 和 <code>@ObservedObject</code> 可创建一个可观测的数据模型，并在多个页面共享数据实例</p></blockquote><p>创建数据：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserModelController</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> user: <span class="type">User</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用数据：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ProfileView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> userController: <span class="type">UserModelController</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用<code>@ObservedObject</code>, 会在同一页面共享数据实例，如果不想如此，也可以使用<code>@StateObject</code>修饰，使得视图能单独拥有一个数据实例</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ProfileView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">StateObject</span> <span class="keyword">var</span> userController = <span class="type">UserModelController</span>.load()</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="全局数据对象注入获取"><a href="#全局数据对象注入获取" class="headerlink" title="全局数据对象注入获取"></a>全局数据对象注入获取</h2><p>创建数据：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ThemeEnvironmentKey</span>: <span class="title">EnvironmentKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> defaultValue = <span class="type">Theme</span>.<span class="keyword">default</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">EnvironmentValues</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> theme: <span class="type">Theme</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">self</span>[<span class="type">ThemeEnvironmentKey</span>.<span class="keyword">self</span>] &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; <span class="keyword">self</span>[<span class="type">ThemeEnvironmentKey</span>.<span class="keyword">self</span>] = newValue &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用方式一： 直接获取</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ArticleView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> theme: <span class="type">Theme</span></span><br><span class="line">    <span class="keyword">var</span> article: <span class="type">Article</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">Text</span>(article.title)</span><br><span class="line">                .foregroundColor(theme.titleTextColor)</span><br><span class="line">            <span class="type">Text</span>(article.body)</span><br><span class="line">                .foregroundColor(theme.bodyTextColor)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用方式2: 父级视图注入</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RootView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> theme: <span class="type">Theme</span></span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> articleLibrary: <span class="type">ArticleLibrary</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ArticleListView</span>(articles: articleLibrary.articles)</span><br><span class="line">            .environmentObject(theme)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ArticleView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Environment</span>(\.theme) <span class="keyword">var</span> theme: <span class="type">Theme</span></span><br><span class="line">    <span class="keyword">var</span> article: <span class="type">Article</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">Text</span>(article.title)</span><br><span class="line">                .foregroundColor(theme.titleTextColor)</span><br><span class="line">            <span class="type">Text</span>(article.body)</span><br><span class="line">                .foregroundColor(theme.bodyTextColor)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;学习combine 数据管理，需要先学习属性包装@PropertyWrapper&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/spa
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>SwiftUI基础组件用法</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/17/SwiftUI-BaseComponentUse/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/17/SwiftUI-BaseComponentUse/</id>
    <published>2020-08-17T03:56:39.000Z</published>
    <updated>2020-08-30T02:53:36.571Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SwiftUI基础组件用法"><a href="#SwiftUI基础组件用法" class="headerlink" title="SwiftUI基础组件用法"></a>SwiftUI基础组件用法</h2><h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">"Hello World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">Text</span>(<span class="string">"Hello, \(Image(systemName: "</span>globe<span class="string">"))!"</span>).font(<span class="type">Font</span>.title.weight(.bold))</span><br></pre></td></tr></table></figure><h3 id="Label"><a href="#Label" class="headerlink" title="Label"></a>Label</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Label</span>(<span class="string">"Swift"</span>, image: <span class="string">"swift"</span>)</span><br><span class="line"><span class="type">Label</span>(<span class="string">"Website"</span>, systemImage: <span class="string">"globe"</span>)</span><br></pre></td></tr></table></figure><h3 id="TextField"><a href="#TextField" class="headerlink" title="TextField"></a>TextField</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"John"</span>    </span><br><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">TextField</span>(<span class="string">"Name's placeholder"</span>, text: $name)</span><br><span class="line">        .textFieldStyle(<span class="type">RoundedBorderTextFieldStyle</span>())</span><br><span class="line">        .padding()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="TextEditor"><a href="#TextEditor" class="headerlink" title="TextEditor"></a>TextEditor</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> fullText: <span class="type">String</span> = <span class="string">"This is some editable text..."</span></span><br><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">TextEditor</span>(text: $fullText)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SecureField"><a href="#SecureField" class="headerlink" title="SecureField"></a>SecureField</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> password: <span class="type">String</span> = <span class="string">"1234"</span>    </span><br><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">SecureField</span>($password)</span><br><span class="line">        .textFieldStyle(<span class="type">RoundedBorderTextFieldStyle</span>())</span><br><span class="line">        .padding()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Image</span>(<span class="string">"foo"</span>)</span><br></pre></td></tr></table></figure><h3 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(</span><br><span class="line">    action: &#123;</span><br><span class="line">        <span class="comment">// did tap</span></span><br><span class="line">    &#125;,</span><br><span class="line">    label: &#123; <span class="type">Text</span>(<span class="string">"Click Me"</span>) &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Link</span>(<span class="string">"View Our Terms of Service"</span>, destination: <span class="type">URL</span>(string: <span class="string">"https://www.example.com/TOS.html"</span>)!)</span><br></pre></td></tr></table></figure><h3 id="NavigationLink"><a href="#NavigationLink" class="headerlink" title="NavigationLink"></a>NavigationLink</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">NavigationLink</span>(destination: <span class="type">DetailView</span>()) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Push"</span>)</span><br><span class="line">    &#125;.navigationBarTitle(<span class="type">Text</span>(<span class="string">"Master"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ToolbarItem"><a href="#ToolbarItem" class="headerlink" title="ToolbarItem"></a>ToolbarItem</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"SwiftUI"</span>).padding()</span><br><span class="line">        .toolbar &#123;</span><br><span class="line">            <span class="type">ToolbarItem</span>(placement: .principal) &#123;</span><br><span class="line">                <span class="type">VStack</span> &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"Title"</span>)</span><br><span class="line">                    <span class="type">Button</span>(<span class="string">"Clickable Subtitle"</span>) &#123; <span class="built_in">print</span>(<span class="string">"principle"</span>) &#125;                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Toggle"><a href="#Toggle" class="headerlink" title="Toggle"></a>Toggle</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> isShowing = <span class="literal">true</span> <span class="comment">// toggle state</span></span><br><span class="line"></span><br><span class="line"><span class="type">Toggle</span>(isOn: $isShowing) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Hello World"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Picker"><a href="#Picker" class="headerlink" title="Picker"></a>Picker</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Form</span> &#123;</span><br><span class="line">        <span class="type">Section</span> &#123;</span><br><span class="line">            <span class="type">Picker</span>(selection: $selection, label:</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Picker Name"</span>)</span><br><span class="line">                , content: &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"Value 1"</span>).tag(<span class="number">0</span>)</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"Value 2"</span>).tag(<span class="number">1</span>)</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"Value 3"</span>).tag(<span class="number">2</span>)</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"Value 4"</span>).tag(<span class="number">3</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DatePicker"><a href="#DatePicker" class="headerlink" title="DatePicker"></a>DatePicker</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> selectedDate = <span class="type">Date</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dateClosedRange: <span class="type">ClosedRange</span>&lt;<span class="type">Date</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="built_in">min</span> = <span class="type">Calendar</span>.current.date(byAdding: .day, value: -<span class="number">1</span>, to: <span class="type">Date</span>())!</span><br><span class="line">    <span class="keyword">let</span> <span class="built_in">max</span> = <span class="type">Calendar</span>.current.date(byAdding: .day, value: <span class="number">1</span>, to: <span class="type">Date</span>())!</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>...<span class="built_in">max</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Form</span> &#123;</span><br><span class="line">        <span class="type">Section</span> &#123;</span><br><span class="line">            <span class="type">DatePicker</span>(</span><br><span class="line">                selection: $selectedDate,</span><br><span class="line">                <span class="keyword">in</span>: dateClosedRange,</span><br><span class="line">                displayedComponents: .date,</span><br><span class="line">                label: &#123; <span class="type">Text</span>(<span class="string">"Due Date"</span>) &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ProgressView"><a href="#ProgressView" class="headerlink" title="ProgressView"></a>ProgressView</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> progress = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">ProgressView</span>(value: progress)</span><br><span class="line">    <span class="type">Button</span>(<span class="string">"More"</span>, action: &#123; progress += <span class="number">0.05</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Slider"><a href="#Slider" class="headerlink" title="Slider"></a>Slider</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> progress: <span class="type">Float</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="type">Slider</span>(value: $progress, from: <span class="number">0.0</span>, through: <span class="number">100.0</span>, by: <span class="number">5.0</span>)  <span class="type">Button</span>(<span class="string">"More"</span>, action: &#123; progress += <span class="number">0.05</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Stepper"><a href="#Stepper" class="headerlink" title="Stepper"></a>Stepper</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">var</span> quantity: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"><span class="type">Stepper</span>(value: $quantity, <span class="keyword">in</span>: <span class="number">0</span>...<span class="number">10</span>, label: &#123; <span class="type">Text</span>(<span class="string">"Quantity \(quantity)"</span>)&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;SwiftUI基础组件用法&quot;&gt;&lt;a href=&quot;#SwiftUI基础组件用法&quot; class=&quot;headerlink&quot; title=&quot;SwiftUI基础组件用法&quot;&gt;&lt;/a&gt;SwiftUI基础组件用法&lt;/h2&gt;&lt;h3 id=&quot;Text&quot;&gt;&lt;a href=&quot;#Text&quot;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>如何创建Widget小物件</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/14/SwiftUI-Widget/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/14/SwiftUI-Widget/</id>
    <published>2020-08-14T10:06:37.000Z</published>
    <updated>2020-08-30T02:55:27.741Z</updated>
    
    <content type="html"><![CDATA[<h3 id="widget-范例创建步骤"><a href="#widget-范例创建步骤" class="headerlink" title="widget 范例创建步骤"></a>widget 范例创建步骤</h3><ol><li>添加target widget工程</li><li>创建shared文件夹共享数据（模型，视图，api等）设置membership</li><li>了解widgit配置结构（configuration，provider，snashot，timeline, viewContent）</li><li>创建Timeline Entry 实例，准备要观测数据</li><li>创建Timeline Provider 服务，api获取数据，实现snapshot, timeline方法</li><li>创建 Widget要展现的view视图, 适配不同尺寸(systemSmall, systemMedium, systemlarge)的widget</li><li>在入口处统一配置</li></ol><h3 id="Widget包含哪些内容："><a href="#Widget包含哪些内容：" class="headerlink" title="Widget包含哪些内容："></a>Widget包含哪些内容：</h3><blockquote><ul><li>要创建一个 Widget 小物件，主要通过配置对象StaticConfiguration 完成</li><li>该对象有两个重要的参数Provider  和 Content</li><li>Provider主要用于管理小物件的实时状态数据。Content是展示的视图view</li><li>Provider中需要实现2个非常重要的方法snapshot和timeline， 他们是小物件的快照，和时间线变化配置</li><li>Provider的还需要配置widget的数据 Timeline Entry</li><li>在所有对象准备好后，在入口统一配置即可</li></ul></blockquote><p>结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Widget</span><br><span class="line">Configuration</span><br><span class="line">Provider                 &#x2F;&#x2F; 时间线服务者， 根据时间调用timelineEntry 实例更新，可以定义调用频率</span><br><span class="line">snapshot             &#x2F;&#x2F; 快照</span><br><span class="line">Timeline entry       &#x2F;&#x2F; 时间线实例，根据时间的变化获取Timeline Entry 的数据</span><br><span class="line">ViewContent              &#x2F;&#x2F; 展示的视图</span><br></pre></td></tr></table></figure><blockquote><p>省略shared共享的文件</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略了api获取等代码</span></span><br><span class="line"><span class="comment">// 省略了Model对象代码</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TotalCaseCount</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><ol><li>TimelineEntry 时间线数据实例</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> WidgetKit</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间线入口实例</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TotalCaseEntry</span>: <span class="title">TimelineEntry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// widgit时间</span></span><br><span class="line">    <span class="keyword">var</span> date: <span class="type">Date</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 要展示的数据</span></span><br><span class="line">    <span class="keyword">let</span> totalCount: <span class="type">TotalCaseCount</span></span><br><span class="line">    <span class="keyword">var</span> isPlaceholder = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展模拟数据</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">TotalCaseEntry</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> stub: <span class="type">TotalCaseEntry</span> &#123;</span><br><span class="line">        <span class="type">TotalCaseEntry</span>(date: <span class="type">Date</span>(), totalCount: .<span class="keyword">init</span>(title: <span class="string">"Global"</span>, confirmed: <span class="number">200</span>, death: <span class="number">10</span>, recovered: <span class="number">100</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> placeholder: <span class="type">TotalCaseEntry</span> &#123;</span><br><span class="line">        <span class="type">TotalCaseEntry</span>(date: <span class="type">Date</span>(), totalCount: .<span class="keyword">init</span>(title: <span class="string">"----"</span>, confirmed: <span class="number">0</span>, death: <span class="number">0</span>, recovered: <span class="number">0</span>), isPlaceholder: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.TimelineProvider 数据调度服务</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> WidgetKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GlobalTotalStatsTimeProvider</span>: <span class="title">TimelineProvider</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 时间线数据实例</span></span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Entry</span> = <span class="type">TotalCaseEntry</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取数据的单例对象</span></span><br><span class="line">    <span class="keyword">let</span> service = <span class="type">Covid19APIService</span>.shared    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 预览占位widget</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">placeholder</span><span class="params">(with: Context)</span></span> -&gt; <span class="type">TotalCaseEntry</span> &#123;</span><br><span class="line">        <span class="type">TotalCaseEntry</span>.placeholder</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 快照配置</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">snapshot</span><span class="params">(with context: Context, completion: @escaping <span class="params">(TotalCaseEntry)</span></span></span> -&gt; ()) &#123;</span><br><span class="line">        <span class="keyword">if</span> context.isPreview &#123;</span><br><span class="line">            completion(<span class="type">TotalCaseEntry</span>.placeholder)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fetchTotalCaseStats &#123; (result) <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">switch</span> result &#123;</span><br><span class="line">                <span class="keyword">case</span> .success(<span class="keyword">let</span> entry):</span><br><span class="line">                    completion(entry)</span><br><span class="line">                <span class="keyword">case</span> .failure(<span class="number">_</span>):</span><br><span class="line">                    completion(<span class="type">TotalCaseEntry</span>.placeholder)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 时间线观测</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">timeline</span><span class="params">(with context: Context, completion: @escaping <span class="params">(Timeline&lt;TotalCaseEntry&gt;)</span></span></span> -&gt; ()) &#123;</span><br><span class="line">        fetchTotalCaseStats &#123; (result) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> result &#123;</span><br><span class="line">            <span class="keyword">case</span> .success(<span class="keyword">let</span> entry):</span><br><span class="line">                <span class="keyword">let</span> timeline = <span class="type">Timeline</span>(entries: [entry], policy: .after(<span class="type">Date</span>().addingTimeInterval(<span class="number">60</span> * <span class="number">10</span>)))</span><br><span class="line">                completion(timeline)</span><br><span class="line">            <span class="keyword">case</span> .failure(<span class="number">_</span>):</span><br><span class="line">                <span class="keyword">let</span> timeline = <span class="type">Timeline</span>(entries: [<span class="type">TotalCaseEntry</span>.placeholder], policy: .after(<span class="type">Date</span>().addingTimeInterval(<span class="number">60</span> * <span class="number">2</span>)))</span><br><span class="line">                completion(timeline)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// api获取数据</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">fetchTotalCaseStats</span><span class="params">(completion: @escaping <span class="params">(Result&lt;TotalCaseEntry, Error&gt;)</span></span></span> -&gt; ()) &#123;</span><br><span class="line">        service.getGlobalTotalCount &#123; (result) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> result &#123;</span><br><span class="line">            <span class="keyword">case</span> .success(<span class="keyword">let</span> stats):</span><br><span class="line">                <span class="keyword">let</span> entry = <span class="type">TotalCaseEntry</span>(date: <span class="type">Date</span>(), totalCount: .<span class="keyword">init</span>(title: <span class="string">"🌍"</span>, confirmed: stats.totalConfirmed, death: stats.totalDeaths, recovered: stats.totalRecovered))</span><br><span class="line">                completion(.success(entry))</span><br><span class="line">            <span class="keyword">case</span> .failure(<span class="keyword">let</span> error):</span><br><span class="line">                completion(.failure(error))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>StatsWidgetSmall 小尺寸widget视图， 其他尺寸视图文件省略</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> WidgetKit</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小尺寸widget视图</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StatsWidgetSmall</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 数据实例</span></span><br><span class="line">    <span class="keyword">let</span> entry: <span class="type">TotalCaseEntry</span></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">TitleDataHeader</span>(title: entry.totalCount.title, date: entry.date)</span><br><span class="line">                .padding(.vertical, <span class="number">4</span>)</span><br><span class="line">                .padding(.horizontal)</span><br><span class="line">            <span class="type">CaseStatView</span>(text: <span class="string">"Confirmed"</span>, totalCountText: entry.totalCount.confirmedText, color: confirmedColor)</span><br><span class="line">            <span class="type">CaseStatView</span>(text: <span class="string">"Death"</span>, totalCountText: entry.totalCount.deathText, color: deathColor)</span><br><span class="line">            <span class="type">CaseStatView</span>(text: <span class="string">"Recovered"</span>, totalCountText: entry.totalCount.recoveredText, color: recoveredColor)</span><br><span class="line">            <span class="type">CaseStatView</span>(text: <span class="string">"Sick"</span>, totalCountText: entry.totalCount.sickText, color: sickColor)</span><br><span class="line">        &#125;</span><br><span class="line">        .redacted(reason: entry.isPlaceholder ? .placeholder: .<span class="keyword">init</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StatsWidgetSmall_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// widget方式预览视图</span></span><br><span class="line">        <span class="type">StatsWidgetSmall</span>(entry: <span class="type">TotalCaseEntry</span>.placeholder)</span><br><span class="line">            .previewContext(<span class="type">WidgetPreviewContext</span>(family: .systemSmall))</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 省略了TitleDataHeader</span></span><br><span class="line"><span class="comment">// 省略了CaseStatView</span></span><br><span class="line"><span class="comment">// widget 的尺寸有3中： .systemSmall .systemMedium .systemLarge</span></span><br></pre></td></tr></table></figure><ol start="4"><li>Widget工程入口配置</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> WidgetKit</span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line">@main</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Covid19StatsWidget</span>: <span class="title">Widget</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> kind: <span class="type">String</span> = <span class="string">"Covid19StatsWidget"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置WidgetConfiguration， 注入Provider， 和 View</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> body: some <span class="type">WidgetConfiguration</span> &#123;</span><br><span class="line">        <span class="type">StaticConfiguration</span>(kind: kind, provider: <span class="type">GlobalTotalStatsTimeProvider</span>()) &#123; entry <span class="keyword">in</span></span><br><span class="line">            <span class="type">StatsWidgetEntryView</span>(entry: entry)</span><br><span class="line">        &#125;</span><br><span class="line">        .configurationDisplayName(<span class="string">"My Covid19-stats"</span>)</span><br><span class="line">        .description(<span class="string">"SHow latest global lifetime stats"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Covid19StatsWidget_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">StatsWidgetEntryView</span>(entry: <span class="type">TotalCaseEntry</span>.stub)</span><br><span class="line">            .previewContext(<span class="type">WidgetPreviewContext</span>(family: .systemSmall))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">学习链接：</span><br><span class="line">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;5gj0OzknhMw&amp;t&#x3D;1820s</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;widget-范例创建步骤&quot;&gt;&lt;a href=&quot;#widget-范例创建步骤&quot; class=&quot;headerlink&quot; title=&quot;widget 范例创建步骤&quot;&gt;&lt;/a&gt;widget 范例创建步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;添加target widget工程&lt;/l
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>修饰符 matchedGeometryEffect 使用要点</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/10/SwiftUI-matchedGeometryEffect/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/10/SwiftUI-matchedGeometryEffect/</id>
    <published>2020-08-10T15:20:32.000Z</published>
    <updated>2020-08-30T02:54:55.970Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>matchedGeometryEffect 是SwiftUI 第2版中一个修饰符，它可以使多个元素进行，位置，大小，等属性进行动画匹配</p></blockquote><h2 id="matchedGeometryEffect-的参数说明"><a href="#matchedGeometryEffect-的参数说明" class="headerlink" title="matchedGeometryEffect 的参数说明"></a>matchedGeometryEffect 的参数说明</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 参数介绍：</span></span><br><span class="line"><span class="comment">// id:  匹配的id</span></span><br><span class="line"><span class="comment">// in:  Namespace.ID  空间</span></span><br><span class="line"><span class="comment">// properties: 要匹配的属性</span></span><br><span class="line"><span class="comment">// anchor： 要对齐锚点，默认center</span></span><br><span class="line"><span class="comment">// isSource:  是否为匹配源，默认为true</span></span><br><span class="line">                    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">matchedGeometryEffect</span>&lt;ID&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    id: ID, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">in</span> namespace: Namespace.ID, </span></span></span><br><span class="line"><span class="function"><span class="params">    properties: MatchedGeometryProperties = .frame, </span></span></span><br><span class="line"><span class="function"><span class="params">    anchor: UnitPoint = .center, </span></span></span><br><span class="line"><span class="function"><span class="params">    isSource: Bool = <span class="literal">true</span>)</span></span> -&gt; some <span class="type">View</span> <span class="keyword">where</span> <span class="type">ID</span> : <span class="type">Hashable</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经典小例子</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ExampleView2</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> nspace</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> flag: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span>&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 淡出的元素：会从本身（green正方）位置执行frame动画, </span></span><br><span class="line">            <span class="comment">// 匹配目标（blue圆）位置，并逐步执行淡出动画</span></span><br><span class="line">            <span class="keyword">if</span> flag &#123;</span><br><span class="line">                <span class="type">Rectangle</span>()</span><br><span class="line">                    .fill(<span class="type">Color</span>.green)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">"geoeffect1"</span>, <span class="keyword">in</span>: nspace)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            <span class="type">Button</span>(<span class="string">"Switch"</span>)&#123;</span><br><span class="line">                withAnimation(.easeInOut(duration: <span class="number">1</span>))&#123;</span><br><span class="line">                    flag.toggle()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            <span class="comment">// 淡入的元素： 会把目标位置的元素（blue圆）拷贝到起始要淡出的（green正方）位置，</span></span><br><span class="line">            <span class="comment">// 然后执行 frame 淡入动画</span></span><br><span class="line">            <span class="keyword">if</span> !flag&#123;</span><br><span class="line">                <span class="type">Circle</span>()</span><br><span class="line">                    .fill(<span class="type">Color</span>.blue)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">"geoeffect1"</span>, <span class="keyword">in</span>: nspace)</span><br><span class="line">                    .frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: <span class="number">400</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">此例子： 当匹配双方的isSouce未设置则默认都为true时候：</span></span><br><span class="line"><span class="comment">1. 传入的视图，使用传出视图的几何图形作为过渡的起始大小和位置     （点击时，拷贝 蓝色圆形 到 绿正方形位置， 并淡入）</span></span><br><span class="line"><span class="comment">2. 传出的视图，使用传入视图的几何图形作为过渡的最终大小和位置     （点击时，从 绿方形 运动变化至 蓝色圆 形，并淡出）</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="其他-properties-和-anchor，-isSource-参数"><a href="#其他-properties-和-anchor，-isSource-参数" class="headerlink" title="其他 properties 和 anchor， isSource 参数"></a>其他 properties 和 anchor， isSource 参数</h2><blockquote><p>栗子2： matchedGeometryEffect修饰符，在匹配时候默认采用frame 方式 center 对齐。此例子我们将对参数更改，理解它各自作用</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ExampleView5</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> ns</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> matched: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">50</span>) &#123;</span><br><span class="line">            <span class="type">HStack</span>(spacing: <span class="number">30</span>) &#123;</span><br><span class="line">                <span class="type">Triangle</span>(.down, .blue)</span><br><span class="line">                    .matchedGeometryEffect(id: matched ? <span class="string">"id1"</span> : <span class="string">"a"</span>, <span class="keyword">in</span>: ns)</span><br><span class="line">                    .frame(width: <span class="number">150</span>, height: <span class="number">150</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Triangle</span>(.<span class="keyword">right</span>, .green)</span><br><span class="line">                    <span class="comment">// isSouce 参数 本例子设为false，表示该元素的位置，大小信息，不会被另一方匹配借用</span></span><br><span class="line">                    <span class="comment">// .matchedGeometryEffect(id: matched ? "id1" : "", in: ns, isSource: false)</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// properties 参数: 本例子是 匹配 目标元素的 size 大小， 所以位置不会改变</span></span><br><span class="line">                    <span class="comment">// .matchedGeometryEffect(id: matched ? "id1" : "", in: ns, properties: .size, isSource: false)</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// anchor 参数： 本例子是用.topLeading 对齐，目标元素的.center</span></span><br><span class="line">                    .matchedGeometryEffect(id:matched ? <span class="string">"id1"</span> : <span class="string">""</span>, <span class="keyword">in</span>: ns, anchor: .topLeading, isSource: <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">                    .frame(width: <span class="number">75</span>, height: <span class="number">75</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Toggle</span>(isOn: $matched.animation(.easeInOut), label: &#123; <span class="type">Text</span>(<span class="string">"Matched"</span>) &#125;).frame(width: <span class="number">140</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多个组合，多个视图匹配"><a href="#多个组合，多个视图匹配" class="headerlink" title="多个组合，多个视图匹配"></a>多个组合，多个视图匹配</h2><p>将多个元素<code>Triangle</code>组合到不同的，分组<code>id</code>中</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ExampleView7</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> ns</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> matched = <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">50</span>) &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Triangle</span>(.down, .purple)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">"id1"</span>, <span class="keyword">in</span>: ns)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Triangle</span>(.<span class="keyword">right</span>, .green)</span><br><span class="line">                    .matchedGeometryEffect(id: matched ? <span class="string">"id1"</span> : <span class="string">"unpair1"</span>, <span class="keyword">in</span>: ns, isSource: <span class="literal">false</span>)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Triangle</span>(.up, .yellow)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">"id2"</span>, <span class="keyword">in</span>: ns)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Triangle</span>(.<span class="keyword">left</span>, .red)</span><br><span class="line">                    .matchedGeometryEffect(id: matched ? <span class="string">"id2"</span> : <span class="string">"unpair2"</span>, <span class="keyword">in</span>: ns, isSource: <span class="literal">false</span>)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Triangle</span>(.down, .orange)</span><br><span class="line">                    .matchedGeometryEffect(id: matched ? <span class="string">"id2"</span> : <span class="string">"unpair3"</span>, <span class="keyword">in</span>: ns, isSource: <span class="literal">false</span>)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                    .border(<span class="type">Color</span>.gray)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">Toggle</span>(isOn: $matched.animation(.easeInOut), label: &#123; <span class="type">Text</span>(<span class="string">"Matched"</span>) &#125;).frame(width: <span class="number">140</span>)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/.io//08/10/SwiftUI-matchedGeometryEffect/01.jpg" class><h2 id="多个空间的匹配"><a href="#多个空间的匹配" class="headerlink" title="多个空间的匹配"></a>多个空间的匹配</h2><p>将多个元素<code>Triangle</code>组合匹配，到不同的空间</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ExampleView8</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> empty_namespace</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> namespace1</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> namespace2</span><br><span class="line">    @<span class="type">Namespace</span> <span class="keyword">var</span> namespace3</span><br><span class="line"></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> namespaceInUse = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> colors: [<span class="type">Color</span>] = [.purple, .green, .yellow, .red]</span><br><span class="line">        <span class="keyword">let</span> direction: [<span class="type">Triangle</span>.<span class="type">Direction</span>] = [.up, .down, .<span class="keyword">left</span>, .<span class="keyword">right</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">30</span>) &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="comment">// Namespace 1</span></span><br><span class="line">                <span class="type">Rectangle</span>().fill(<span class="type">Color</span>.green.opacity(<span class="number">0.2</span>)).frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">0</span>, <span class="keyword">in</span>: namespace1)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">1</span>, <span class="keyword">in</span>: namespace1)</span><br><span class="line">                </span><br><span class="line">                <span class="type">Rectangle</span>().fill(<span class="type">Color</span>.green.opacity(<span class="number">0.2</span>)).frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">2</span>, <span class="keyword">in</span>: namespace1)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">3</span>, <span class="keyword">in</span>: namespace1)</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// Namespace 2</span></span><br><span class="line">                <span class="type">Rectangle</span>().fill(<span class="type">Color</span>.blue.opacity(<span class="number">0.2</span>)).frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">0</span>, <span class="keyword">in</span>: namespace2)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">2</span>, <span class="keyword">in</span>: namespace2)</span><br><span class="line"></span><br><span class="line">                <span class="type">Rectangle</span>().fill(<span class="type">Color</span>.blue.opacity(<span class="number">0.2</span>)).frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">1</span>, <span class="keyword">in</span>: namespace2)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">3</span>, <span class="keyword">in</span>: namespace2)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Namespace 3</span></span><br><span class="line">                <span class="type">Rectangle</span>().fill(<span class="type">Color</span>.red.opacity(<span class="number">0.2</span>)).frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">0</span>, <span class="keyword">in</span>: namespace3)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">1</span>, <span class="keyword">in</span>: namespace3)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">2</span>, <span class="keyword">in</span>: namespace3)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="number">3</span>, <span class="keyword">in</span>: namespace3)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span>..&lt;<span class="number">4</span>) &#123; idx <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Triangle</span>(direction[idx], colors[idx])</span><br><span class="line">                        .matchedGeometryEffect(id: idx, <span class="keyword">in</span>: activeNamespace(), isSource: <span class="literal">false</span>)</span><br><span class="line">                        .frame(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="type">HStack</span>(spacing: <span class="number">30</span>) &#123;</span><br><span class="line">                <span class="type">Button</span>(<span class="string">"Match namespace1"</span>) &#123; withAnimation &#123; namespaceInUse = <span class="number">1</span> &#125;&#125;</span><br><span class="line">                <span class="type">Button</span>(<span class="string">"Match namespace2"</span>) &#123; withAnimation &#123; namespaceInUse = <span class="number">2</span> &#125;&#125;</span><br><span class="line">                <span class="type">Button</span>(<span class="string">"Match namespace3"</span>) &#123; withAnimation &#123; namespaceInUse = <span class="number">3</span> &#125;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">"Unmatch"</span>) &#123; withAnimation &#123; namespaceInUse = <span class="number">0</span> &#125;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">activeNamespace</span><span class="params">()</span></span> -&gt; <span class="type">Namespace</span>.<span class="type">ID</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> namespaceInUse == <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> namespace1</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> namespaceInUse == <span class="number">2</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> namespace2</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> namespaceInUse == <span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> namespace3</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> empty_namespace</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/.io//08/10/SwiftUI-matchedGeometryEffect/02.jpg" class><blockquote><p>附件：案例中用到的<code>Triangle</code></p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Triangle</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> direction: <span class="type">Direction</span></span><br><span class="line">    <span class="keyword">let</span> color: <span class="type">Color</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> direction: <span class="type">Direction</span> = .down, <span class="number">_</span> color: <span class="type">Color</span> = .black) &#123;</span><br><span class="line">        <span class="keyword">self</span>.direction = direction</span><br><span class="line">        <span class="keyword">self</span>.color = color</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">TriangleShape</span>()</span><br><span class="line">            .fill(color)</span><br><span class="line">            .border(<span class="type">Color</span>.black)</span><br><span class="line">            .rotationEffect(<span class="type">Angle</span>.degrees(direction.rawValue))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TriangleShape</span>: <span class="title">Shape</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">path</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; <span class="type">Path</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> path = <span class="type">Path</span>()</span><br><span class="line">            </span><br><span class="line">            path.move(to: .zero)</span><br><span class="line">            path.addLine(to: <span class="type">CGPoint</span>(x: rect.maxX, y: <span class="number">0</span>))</span><br><span class="line">            path.addLine(to: <span class="type">CGPoint</span>(x: rect.midX, y: rect.midY))</span><br><span class="line">            path.closeSubpath()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> path</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Direction</span>: <span class="title">Double</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> down = <span class="number">0</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">left</span> = <span class="number">90</span></span><br><span class="line">        <span class="keyword">case</span> up = <span class="number">180</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">right</span> = <span class="number">270</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>原文章学习参考资料：</p></blockquote><p><a href="https://swiftui-lab.com/matchedgeometryeffect-part1/" target="_blank" rel="noopener">https://swiftui-lab.com/matchedgeometryeffect-part1/</a></p><p><a href="https://swiftui-lab.com/matchedgeometryeffect-part2/" target="_blank" rel="noopener">https://swiftui-lab.com/matchedgeometryeffect-part2/</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;matchedGeometryEffect 是SwiftUI 第2版中一个修饰符，它可以使多个元素进行，位置，大小，等属性进行动画匹配&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;matchedGeometryEffect-的参数说明&quot;&gt;&lt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用Extension扩展自定义的Animation和Transition</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/09/SwiftUI-custom-animation-transition/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/09/SwiftUI-custom-animation-transition/</id>
    <published>2020-08-09T08:24:49.000Z</published>
    <updated>2020-08-30T02:53:52.285Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Animation-和-AnyTransition"><a href="#Animation-和-AnyTransition" class="headerlink" title="Animation 和 AnyTransition"></a>Animation 和 AnyTransition</h3><blockquote><p>在SwiftUI中已经有框架定义的<code>Animation</code>动画，和 <code>Transition</code> 过渡，调用的方式也非常简单<br>对<code>View</code>应用的修饰符即可. 如<code>.animation(.easeInOut(duration: 10))</code></p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 动画</span></span><br><span class="line">.animation(.easeInOut(duration: <span class="number">10</span>))</span><br><span class="line">.animation(.interactiveSpring(response: <span class="number">0.6</span>, dampingFraction: <span class="number">0.6</span>, blendDuration: <span class="number">0.25</span>))</span><br><span class="line">.animation(.interactiveSpring())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过渡</span></span><br><span class="line">.transition(.identity)</span><br><span class="line">.transition(.scale)</span><br><span class="line">.transition(<span class="type">AnyTransition</span>.opacity)</span><br></pre></td></tr></table></figure><blockquote><p>如果想自定一些动画，或简化调用，则可以使用extension去扩展这两个结构体对象，请看下方小例子</p></blockquote><h3 id="如果要在原动画基础上，实现自定义动画"><a href="#如果要在原动画基础上，实现自定义动画" class="headerlink" title="如果要在原动画基础上，实现自定义动画"></a>如果要在原动画基础上，实现自定义动画</h3><h5 id="扩展Animation增加自定义动画"><a href="#扩展Animation增加自定义动画" class="headerlink" title="扩展Animation增加自定义动画"></a>扩展Animation增加自定义动画</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义：</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Animation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> hero: <span class="type">Animation</span> &#123;</span><br><span class="line">        debugAnimations ? debug : .interactiveSpring(response: <span class="number">0.6</span>, dampingFraction: <span class="number">0.6</span>, blendDuration: <span class="number">0.25</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> blur: <span class="type">Animation</span> &#123;</span><br><span class="line">        debugAnimations ? debug : .linear(duration: <span class="number">0.25</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> debug: <span class="type">Animation</span>&#123;</span><br><span class="line">        .easeInOut(duration: <span class="number">4.0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用：</span></span><br><span class="line"><span class="comment">// with方式使用</span></span><br><span class="line">withAnimation(.hero) &#123;</span><br><span class="line">    <span class="keyword">self</span>.selectedItem = item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">withAnimation(.debug) &#123;</span><br><span class="line">    <span class="keyword">self</span>.selectedItem = item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// animation修饰符方式使用</span></span><br><span class="line">.animation(.blur)</span><br><span class="line">.animation(.debug)</span><br></pre></td></tr></table></figure><h5 id="扩展Animation增加自定义过渡效果"><a href="#扩展Animation增加自定义过渡效果" class="headerlink" title="扩展Animation增加自定义过渡效果"></a>扩展Animation增加自定义过渡效果</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义：</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AnyTransition</span> </span>&#123;</span><br><span class="line">    <span class="comment">// AnimatableModifier修饰符</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">InvisibleModifier</span>: <span class="title">AnimatableModifier</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> pct: <span class="type">Double</span></span><br><span class="line">        <span class="keyword">var</span> animatableData: <span class="type">Double</span> &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123;</span><br><span class="line">                pct</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">set</span> &#123;</span><br><span class="line">                pct = newValue</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">body</span><span class="params">(content: Content)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> content</span><br><span class="line">                .opacity(pct == <span class="number">1.0</span> ? <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1 - 0 透明度变化</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> invisible: <span class="type">AnyTransition</span> &#123;</span><br><span class="line">        <span class="type">AnyTransition</span>.modifier(</span><br><span class="line">            active: <span class="type">InvisibleModifier</span>(pct: <span class="number">0</span>),</span><br><span class="line">            identity: <span class="type">InvisibleModifier</span>(pct: <span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用：</span></span><br><span class="line">.transition(.invisible)</span><br><span class="line">.transition(<span class="type">AnyTransition</span>.invisible)</span><br></pre></td></tr></table></figure><h3 id="其实扩展-Animation-和-AnyTransition-和扩展-Color，-Font-本质是没有什么区别，哈哈😂"><a href="#其实扩展-Animation-和-AnyTransition-和扩展-Color，-Font-本质是没有什么区别，哈哈😂" class="headerlink" title="其实扩展 Animation 和 AnyTransition  和扩展 Color， Font 本质是没有什么区别，哈哈😂"></a>其实扩展 <code>Animation</code> 和 <code>AnyTransition</code>  和扩展 <code>Color</code>， <code>Font</code> 本质是没有什么区别，哈哈😂</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Animation-和-AnyTransition&quot;&gt;&lt;a href=&quot;#Animation-和-AnyTransition&quot; class=&quot;headerlink&quot; title=&quot;Animation 和 AnyTransition&quot;&gt;&lt;/a&gt;Animation 和
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>如何自定义@Environment变量</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/08/09/SwiftUI-Environment/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/08/09/SwiftUI-Environment/</id>
    <published>2020-08-09T07:50:51.000Z</published>
    <updated>2020-08-30T02:54:38.962Z</updated>
    
    <content type="html"><![CDATA[<h3 id="关于-Environment-基础"><a href="#关于-Environment-基础" class="headerlink" title="关于@Environment 基础"></a>关于@Environment 基础</h3><blockquote><p>在SwiftUI在 @Environment包装的是APP系统环境变量,可以在整个应用任意页面获取</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">Environment</span>(\.colorScheme) <span class="keyword">var</span> scheme     <span class="comment">//系统当前主题模式， .dark 或 .light</span></span><br></pre></td></tr></table></figure><h3 id="如果要自定义一些全局环境的变量怎么办"><a href="#如果要自定义一些全局环境的变量怎么办" class="headerlink" title="如果要自定义一些全局环境的变量怎么办"></a>如果要自定义一些全局环境的变量怎么办</h3><blockquote><p>可以通过 <code>extension</code> 扩展 <code>EnvironmentValues</code> 和配置 <code>EnvironmentKey</code> 实现</p></blockquote><p>1.预设两个取值的key, 并设置默认值，一个可以示例获取对象，一个示例用于获取CGFloat数值</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EnvironmentKey</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">HeroConfigKey</span>: <span class="title">EnvironmentKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> defaultValue: <span class="type">HeroConfiguration</span> = .<span class="keyword">default</span>     <span class="comment">//HeroConfiguration是一个结构体对象，此处省略实现</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ModalTransitionKey</span>: <span class="title">EnvironmentKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> defaultValue: <span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.扩展<code>EnvironmentValues</code> 值选项，配置<code>get</code>和<code>set</code> 属性</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">EnvironmentValues</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> heroConfig: <span class="type">HeroConfiguration</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>[<span class="type">HeroConfigKey</span>.<span class="keyword">self</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>[<span class="type">HeroConfigKey</span>.<span class="keyword">self</span>] = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> modalTransitionPercent: <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>[<span class="type">ModalTransitionKey</span>.<span class="keyword">self</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>[<span class="type">ModalTransitionKey</span>.<span class="keyword">self</span>] = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-Environment-获取自定义预设的全局环境变量"><a href="#使用-Environment-获取自定义预设的全局环境变量" class="headerlink" title="使用@Environment 获取自定义预设的全局环境变量"></a>使用@Environment 获取自定义预设的全局环境变量</h3><blockquote><p>和使用系统预设的的变量一致</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">Environment</span>(\.modalTransitionPercent) <span class="keyword">var</span> pct: <span class="type">CGFloat</span></span><br><span class="line">@<span class="type">Environment</span>(\.heroConfig) <span class="keyword">var</span> config: <span class="type">HeroConfiguration</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// print(pct)        0</span></span><br><span class="line"><span class="comment">// print(config)     HeroConfiguration.default 对象</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;关于-Environment-基础&quot;&gt;&lt;a href=&quot;#关于-Environment-基础&quot; class=&quot;headerlink&quot; title=&quot;关于@Environment 基础&quot;&gt;&lt;/a&gt;关于@Environment 基础&lt;/h3&gt;&lt;blockquote&gt;

      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>关于Hashable和Equatable协议的使用，比较结构体等数据</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/07/14/SwiftUI-Hashable-Equatable/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/07/14/SwiftUI-Hashable-Equatable/</id>
    <published>2020-07-14T05:02:50.000Z</published>
    <updated>2020-08-30T02:54:45.006Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Equatable协议"><a href="#Equatable协议" class="headerlink" title="Equatable协议"></a>Equatable协议</h2><blockquote><p>比较基础的字符串是否相等，可以直接<code>==</code>运算符，是因为在标准库中，官方已经实现了基础数据类型的<code>Equatable</code>协议</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hello, playground"</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"Hello, playground"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> str1 == str2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Yes"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"No"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>但如果要比较两个<code>struct</code>, 必须自己实现<code>Equatable</code>协议中的<code>==</code>方法，才能比较</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(lhs: Person, rhs: Person)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>  lhs.name == rhs.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">19</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> p1 == p2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Yes"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"No"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Hashable协议"><a href="#Hashable协议" class="headerlink" title="Hashable协议"></a>Hashable协议</h2><blockquote><p>1.如果要把一个对象作为<code>Dictionary</code>的<code>key</code>, 或着<code>Set</code>的值，那它必须继承自<code>Hashable</code>协议<br>2.<code>Hashable</code>协议是继承自<code>Equatable</code>协议的<br>3.<code>Hashable</code>协议有一个<code>hash()</code>方法,可以合并生成一个唯一的<code>hashValue</code>便于区分每条数据</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Post</span>:<span class="title">Equatable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Account</span>: <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> accountIdentifier: <span class="type">Person</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// hash方法这里生成的值，可作为字典的key，需要具有唯一性,</span></span><br><span class="line">    <span class="comment">// 在本栗子如果combine没有合并age的值当两个Person名称相同，acount1和acount2不能同时存在作为key</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hash</span><span class="params">(into hasher: <span class="keyword">inout</span> Hasher)</span></span> &#123;</span><br><span class="line">        hasher.combine(accountIdentifier.name)</span><br><span class="line">        hasher.combine(accountIdentifier.age)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 这里==方法是做account自身的比较，如果只比较name的话，account1 和 account2 将会相等， 当同时比较age时两者将不再相等</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(lhs: Account, rhs: Account)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        lhs.accountIdentifier.name == rhs.accountIdentifier.name <span class="comment">// &amp;&amp; lhs.accountIdentifier.age == rhs.accountIdentifier.age</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>比较两个<code>Account</code>账户, <code>==</code>方法的不同实现，将对判等产生不同的结果</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> acount1 = <span class="type">Account</span>(accountIdentifier: <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">19</span>))</span><br><span class="line"><span class="keyword">var</span> acount2 = <span class="type">Account</span>(accountIdentifier: <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> acount1 == acount2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Yes acount is same"</span>)  <span class="comment">//将被输出，因为我们 == 运算只是对比了 name</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"No"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当把<code>Acount</code>作为<code>dict</code>字典的<code>key</code>时，两者的<code>hashValue</code>是不能相等的</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// account1 和 account2 可以同时作为 dict 的 key , 因为我们 Account 的 hash() 方法中，组合了 name 和 age 使得它的hashValue具有唯一性质</span></span><br><span class="line"><span class="keyword">var</span> dict = [</span><br><span class="line">    acount1: <span class="type">Post</span>(content: <span class="string">"post1"</span>),</span><br><span class="line">    acount2: <span class="type">Post</span>(content: <span class="string">"post1"</span>),</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> post1 = dict[<span class="type">Account</span>(accountIdentifier: <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">19</span>)) ]</span><br><span class="line"><span class="keyword">let</span> post2 = dict[<span class="type">Account</span>(accountIdentifier: <span class="type">Person</span>(name: <span class="string">"Tang"</span>, age: <span class="number">20</span>)) ]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由于post内容也是一致的，所以Yes语句将被输出</span></span><br><span class="line"><span class="keyword">if</span> post1 == post2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Yes post is same"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"No"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>小结：<code>Equatable</code> 是用于数据比较的协议，<code>Hashable</code>继承了<code>Equatable</code>。 同时它多了一个<code>hash</code>运算，可生成唯一的<code>hashValue</code>以便于在 <code>Dictionary</code>，<code>Set</code>等数据中使用。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Equatable协议&quot;&gt;&lt;a href=&quot;#Equatable协议&quot; class=&quot;headerlink&quot; title=&quot;Equatable协议&quot;&gt;&lt;/a&gt;Equatable协议&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;比较基础的字符串是否相等，可以直接&lt;cod
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用@ViewBuilder封装组件，分离组件逻辑和渲染</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/07/10/SwiftUI-ViewBuilder/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/07/10/SwiftUI-ViewBuilder/</id>
    <published>2020-07-10T09:26:45.000Z</published>
    <updated>2020-08-30T02:55:21.844Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ViewBuilder-可以做些什么？"><a href="#ViewBuilder-可以做些什么？" class="headerlink" title="@ViewBuilder 可以做些什么？"></a>@ViewBuilder 可以做些什么？</h2><blockquote><p>使用<code>@ViewBuilder</code>可以更自由的组装视图，把相同的部分统一封装，不同的部分抽离在外部进行自由定义。它能实现非常类似前端书写vue组件的slot功能。。。</p></blockquote><p> 先看一个小例子：</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当我们要个文字，或图片添加相同的圆角和背景色时，最原始的做法我们可以如下</span></span><br><span class="line"><span class="type">Text</span>(<span class="string">"Click Me ！"</span>)</span><br><span class="line">   .background(<span class="type">Color</span>.red)</span><br><span class="line">   .cornerRadius(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">Image</span>(systemName: <span class="string">"person"</span>)</span><br><span class="line">   .background(<span class="type">Color</span>.red)</span><br><span class="line">   .cornerRadius(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><blockquote><p>其次我们也可以，扩充一个自定义修饰符，<code>ViewModifier</code> 在 <code>View</code>上实现，实现可参考下面的链接</p></blockquote><p>[链接🔗][ <a href="https://tttyyyzzz2020.github.io/2020/04/10/SwiftUI-custome-modifier/" target="_blank" rel="noopener">https://tttyyyzzz2020.github.io/2020/04/10/SwiftUI-custome-modifier/</a> ]</p><blockquote><p>除了上面的方法，我们还可以用 <code>@ViewBuilder</code> 来创建<br>相较于前者而言，可以自由的管理组件的样式，还能给它定义更多状态。如给图片和按钮添加状态从而改变颜色。</p></blockquote><p>1、创建组件，初始化是传入<code>@ViewBuilder</code>修饰的函数，该函数许返回<code>View</code>类型数据,最后在 <code>func body()</code> 方法中渲染</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">YiWrapperView</span>&lt;<span class="title">Content</span>: <span class="title">View</span>&gt;: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">Content</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> status: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> status: <span class="type">State</span>&lt;<span class="type">Bool</span>&gt; = .<span class="keyword">init</span>(initialValue: <span class="literal">false</span>), </span><br><span class="line">        @<span class="type">ViewBuilder</span> content: () -&gt; <span class="type">Content</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>._status = status</span><br><span class="line">        <span class="keyword">self</span>.content = content()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .padding()</span><br><span class="line">            .background(status ? <span class="type">Color</span>.red :<span class="type">Color</span>.green)</span><br><span class="line">            .cornerRadius(<span class="number">5</span>)</span><br><span class="line">            .onTapGesture &#123;</span><br><span class="line">                <span class="keyword">self</span>.status.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、使用组件</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">YiWrapperView</span>(.<span class="keyword">init</span>(initialValue: <span class="literal">true</span>)) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Click Me ！"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">YiWrapperView</span> &#123;</span><br><span class="line">    <span class="type">Image</span>(systemName: <span class="string">"person"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="封装一个数据获取层的View组件"><a href="#封装一个数据获取层的View组件" class="headerlink" title="封装一个数据获取层的View组件"></a>封装一个数据获取层的View组件</h2><blockquote><p>在下面的🌰栗子 我们把数据请求逻辑单独封装起来。<br>使用<code>ViewBuilder</code>去构建视图， 从而使得数据获取和视图渲染剥离。<br>使用者只需关心如何将数据渲染不同的视图， 而数据的获取的逻辑我们统一封装在最外包裹层</p></blockquote><p>1、下方是一个以core data 数据获取的组件</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> CoreData</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FetchResultWrapper</span>&lt;<span class="title">Object</span>, <span class="title">Content</span>&gt;: <span class="title">View</span> <span class="title">where</span> <span class="title">Object</span>: <span class="title">NSManagedObject</span>, <span class="title">Content</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> content: ([<span class="type">Object</span>]) -&gt; <span class="type">Content</span>   <span class="comment">//视图构建</span></span><br><span class="line">    <span class="keyword">var</span> request: <span class="type">FetchRequest</span>&lt;<span class="type">Object</span>&gt;    <span class="comment">//数据请求</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(</span><br><span class="line">        predicate: <span class="type">NSPredicate</span> = <span class="type">NSPredicate</span>(value: <span class="literal">true</span>),</span><br><span class="line">        sortDescriptors: [<span class="type">NSSortDescriptor</span>] = [],</span><br><span class="line">        @<span class="type">ViewBuilder</span> content: @escaping([<span class="type">Object</span>]) -&gt; <span class="type">Content</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">self</span>.content = content</span><br><span class="line">        <span class="keyword">self</span>.request = <span class="type">FetchRequest</span>(</span><br><span class="line">            entity: <span class="type">Object</span>.entity(),</span><br><span class="line">            sortDescriptors: sortDescriptors,</span><br><span class="line">            predicate: predicate</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.content(request.wrappedValue.<span class="built_in">map</span>(&#123;$<span class="number">0</span>&#125;))     <span class="comment">//数据传递给视图</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、组件调用方式 (注意这里core data 的代码并不完整)</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取core data 数据</span></span><br><span class="line"><span class="type">FetchResultWrapper</span>(predicate: <span class="keyword">self</span>.coredataManager.notePredicate,</span><br><span class="line">                    sortDescriptors: [<span class="keyword">self</span>.coredataManager.sortDescriptor]) &#123; (data: [<span class="type">Item</span>])  <span class="keyword">in</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">//在已经有了 data 数据， 可以自由渲染了...</span></span><br><span class="line">                    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ViewBuilder-可以做些什么？&quot;&gt;&lt;a href=&quot;#ViewBuilder-可以做些什么？&quot; class=&quot;headerlink&quot; title=&quot;@ViewBuilder 可以做些什么？&quot;&gt;&lt;/a&gt;@ViewBuilder 可以做些什么？&lt;/h2&gt;&lt;bl
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用ToggleStyle自定义Toggle组件的样式</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/06/12/SwiftUI-CustomToogleStyle/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/06/12/SwiftUI-CustomToogleStyle/</id>
    <published>2020-06-12T15:40:59.000Z</published>
    <updated>2020-08-30T02:54:04.627Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文章内容主要学习如何通过 <code>ButtonStyle，ToggleStyle，TextFieldStyle</code> 等协议的<code>func makeBody()</code>方法，配置组件的样式.</p></blockquote><h2 id="SwiftUI框架默认提供的组件样式"><a href="#SwiftUI框架默认提供的组件样式" class="headerlink" title="SwiftUI框架默认提供的组件样式"></a>SwiftUI框架默认提供的组件样式</h2><blockquote><p>在SwiftUI中为适配不同的设备，及交互场景，框架为很多交互提供了一些默认的自定义样式。</p></blockquote><p>1、如<code>Button</code> 组件有如下默认样式，使用也非常简单只要应用对应的修饰符即可。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 默认样式</span></span><br><span class="line"><span class="type">BorderedButtonStyle</span></span><br><span class="line"><span class="type">BorderlessButtonStyle</span></span><br><span class="line"><span class="type">DefaultButtonStyle</span></span><br><span class="line"><span class="type">LinkButtonStyle</span></span><br><span class="line"><span class="type">PlainButtonStyle</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方式</span></span><br><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">                </span><br><span class="line">&#125;) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Button"</span>)</span><br><span class="line">&#125;</span><br><span class="line">.buttonStyle(<span class="type">PlainButtonStyle</span>())</span><br></pre></td></tr></table></figure><p>2、其<code>Toggle</code>组件也有如下样式</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 默认样式</span></span><br><span class="line"><span class="type">CheckboxToggleStyle</span>      </span><br><span class="line"><span class="type">DefaultToggleStyle</span></span><br><span class="line"><span class="type">SwitchToggleStyle</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="type">Toggle</span>(isOn: $checked) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"是否打开"</span>)</span><br><span class="line">&#125;</span><br><span class="line">.toggleStyle(<span class="type">SwitchToggleStyle</span>())</span><br></pre></td></tr></table></figure><blockquote><p>当这些默认的样式，不符合我们的需求时候，或改样式在该平台设备中不适用是就需要我们去自己定义，下面以Toogle组件为例。</p></blockquote><h2 id="自定义Toggle的样式"><a href="#自定义Toggle的样式" class="headerlink" title="自定义Toggle的样式"></a>自定义Toggle的样式</h2><p>1、创建结构体，继承自<code>ToggleStyle</code>， 然后实现<code>func makeBody()</code>方法, 其中的<code>configuration</code> 就是相关一些组件状态配置项</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">configuration.label  <span class="comment">//是标签文字</span></span><br><span class="line">configuration.isOn   <span class="comment">//是选中状态</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CustomToggleStyle</span>: <span class="title">ToggleStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> size: <span class="type">CGFloat</span> = <span class="number">40</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeBody</span><span class="params">(configuration: Configuration)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span>&#123;</span><br><span class="line">            configuration.label</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                configuration.isOn.toggle()</span><br><span class="line">            &#125;) &#123;</span><br><span class="line">                <span class="keyword">if</span> configuration.isOn &#123;</span><br><span class="line">                    <span class="type">ZStack</span>&#123;</span><br><span class="line">                        <span class="type">Circle</span>()</span><br><span class="line">                            .frame(width: size, height: size, alignment: .center)</span><br><span class="line">                            .foregroundColor(<span class="type">Color</span>.white)</span><br><span class="line">                        <span class="type">Image</span>(systemName: <span class="string">"power"</span>)</span><br><span class="line">                            .resizable()</span><br><span class="line">                            .frame(width: <span class="number">20</span>, height: <span class="number">20</span>, alignment: .center)</span><br><span class="line">                            .foregroundColor(<span class="type">Color</span>.orange)</span><br><span class="line">                    &#125;.shadow(color: <span class="type">Color</span>.gray, radius: <span class="number">5</span>, x: <span class="number">2</span>, y: <span class="number">2</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">ZStack</span>&#123;</span><br><span class="line">                        <span class="type">Circle</span>()</span><br><span class="line">                            .fill(<span class="type">Color</span>.gray)</span><br><span class="line">                            .frame(width: size, height: size,alignment: .center)</span><br><span class="line">                        </span><br><span class="line">                        <span class="type">Image</span>(systemName: <span class="string">"power"</span>)</span><br><span class="line">                            .resizable()</span><br><span class="line">                            .frame(width: <span class="number">20</span>, height: <span class="number">20</span>, alignment: .center)</span><br><span class="line">                            .foregroundColor(<span class="type">Color</span>.white)</span><br><span class="line">                        </span><br><span class="line">                    &#125;</span><br><span class="line">                    .shadow(color: <span class="type">Color</span>.gray, radius: <span class="number">5</span>, x: <span class="number">2</span>, y: <span class="number">2</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、应用自定义的样式,在本栗子中只需添加<code>.toggleStyle(CustomToggleStyle())</code>修饰符即可</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> checked: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="comment">// 原始样式</span></span><br><span class="line">            <span class="type">Toggle</span>(isOn: $checked) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"请点击 \(checked ? "</span><span class="type">ON</span><span class="string">" : "</span><span class="type">OFF</span><span class="string">")"</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//自定义的toggle样式</span></span><br><span class="line">            <span class="type">Toggle</span>(isOn: $checked) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"请点击 \(checked ? "</span><span class="type">ON</span><span class="string">" : "</span><span class="type">OFF</span><span class="string">")"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .toggleStyle(<span class="type">CustomToggleStyle</span>())  </span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">        .background(<span class="type">Color</span>.gray.opacity(<span class="number">0.2</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、原始样式与自定样式效果图</p><img src="/.io//06/12/SwiftUI-CustomToogleStyle/custome_toggle_off.jpg" class><img src="/.io//06/12/SwiftUI-CustomToogleStyle/custome_toggle_on.jpg" class>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文章内容主要学习如何通过 &lt;code&gt;ButtonStyle，ToggleStyle，TextFieldStyle&lt;/code&gt; 等协议的&lt;code&gt;func makeBody()&lt;/code&gt;方法，配置组件的样式.&lt;/p&gt;
&lt;/blockquo
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用PreviewProvider控制预览效果</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/05/10/SwiftUI-PreviewProvider/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/05/10/SwiftUI-PreviewProvider/</id>
    <published>2020-05-10T14:42:12.000Z</published>
    <updated>2020-08-30T03:11:56.133Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本例主要演示如何在SiwftUI 实现不同颜色主题，不同设备，及尺寸的实时预览</p></blockquote><p>1、创建一个基础的ContentView</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取当前环境的颜色模式</span></span><br><span class="line">    @<span class="type">Environment</span>(\.colorScheme) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>&#123;</span><br><span class="line">            (colorScheme == .light ?  <span class="type">Color</span>.white : <span class="type">Color</span>.black)</span><br><span class="line">                .edgesIgnoringSafeArea(.all)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"ContentView"</span>)</span><br><span class="line">                .foregroundColor(.primary)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、创建一个预览的previews</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Group</span> &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 主题颜色</span></span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                .environment(\.colorScheme, .light)</span><br><span class="line">            </span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                .environment(\.colorScheme, .dark)</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 预览的设备</span></span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                .previewDevice(<span class="string">"iPhone 8"</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 布局尺寸</span></span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                .previewLayout(.fixed(width: <span class="number">100</span>, height: <span class="number">100</span>))</span><br><span class="line">            </span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                .previewLayout(.sizeThatFits)</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/.io//PreviewProvider_01.jpg" alt="aaa"></p><blockquote><p>通过<code>.environment(\.colorScheme, .dark)</code> 预设颜色模式</p></blockquote><img src="/.io//05/10/SwiftUI-PreviewProvider/PreviewProvider_01.jpg" class title="[title]"><blockquote><p>通过<code>.previewDevice(&quot;iPhone 8&quot;)</code> 预设设备<br>通过<code>.previewLayout(.sizeThatFits)</code> 预设尺寸</p></blockquote><img src="/.io//05/10/SwiftUI-PreviewProvider/PreviewProvider_02.jpg" class title="[title2]">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本例主要演示如何在SiwftUI 实现不同颜色主题，不同设备，及尺寸的实时预览&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;1、创建一个基础的ContentView&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用ViewModifier复用组件样式</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/04/10/SwiftUI-custome-modifier/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/04/10/SwiftUI-custome-modifier/</id>
    <published>2020-04-10T07:18:43.000Z</published>
    <updated>2020-08-30T02:53:57.984Z</updated>
    
    <content type="html"><![CDATA[<h3 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h3><p>1、首先创建自定义modifer <code>CustomTextBorder</code>， 需要让结构提继承 <code>ViewModifier</code> 协议，再实现协议中的<code>func body()</code>方法，其中的<code>content</code> 就是view本身，我们可以在content上面应用系统的提供的modifier如<code>.font()</code>, <code>.padding()</code>等来装饰我们的组件…</p><p>这样我么就创建了一个简易的自定义修饰符</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 继承viewModifier</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CustomTextBorder</span>: <span class="title">ViewModifier</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">body</span><span class="params">(content: Content)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 编写body体代码</span></span><br><span class="line">        <span class="keyword">return</span> content</span><br><span class="line">            .font(.largeTitle)</span><br><span class="line">            .padding()</span><br><span class="line">            .overlay(</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">15</span>)</span><br><span class="line">                    .stroke(lineWidth: <span class="number">2</span>)</span><br><span class="line">            )</span><br><span class="line">            .foregroundColor(.blue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、 使用自定义modifier很简单，直接在调用<code>.modifier()</code> 传入我们自定义的 <code>CustomTextBorder()</code> 就可以了</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"SwiftUI Tutorials"</span>)</span><br><span class="line">            .modifier(<span class="type">CustomTextBorder</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、 但更好的方式，是我们通常会将自定义modifier 扩展到 <code>View</code> 上 ，使得调用的方式更加简洁</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customTextBorder</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.modifier(<span class="type">CustomTextBorder</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4、后续应用方式就可以如下调用了。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">Text</span>(<span class="string">"SwiftUI Tutorials"</span>)</span><br><span class="line">    .customTextBorder()</span><br></pre></td></tr></table></figure><blockquote><p>最后我们通过一个自定义按钮的栗子来作为示范。。。。🌰</p></blockquote><h3 id="示例：Modifier-自定义按钮的样式"><a href="#示例：Modifier-自定义按钮的样式" class="headerlink" title="示例：Modifier 自定义按钮的样式"></a>示例：Modifier 自定义按钮的样式</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                </span><br><span class="line">            &#125;) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Continue"</span>)</span><br><span class="line">                    .modifier(<span class="type">CustomeButtonModifer</span>())</span><br><span class="line">                </span><br><span class="line">                <span class="type">Text</span>(<span class="string">"MoreDetail"</span>)</span><br><span class="line">                    .modifier(<span class="type">CustomeButtonModifer</span>(backgroundColor: .green))</span><br><span class="line">                </span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Cancel"</span>)</span><br><span class="line">                    .modifier(<span class="type">CustomeButtonModifer</span>(backgroundColor: .red, size: <span class="number">20</span>))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CustomeButtonModifer</span>: <span class="title">ViewModifier</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> backgroundColor: <span class="type">Color</span> = <span class="type">Color</span>.blue</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> size: <span class="type">CGFloat</span> = <span class="number">16</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">body</span><span class="params">(content: Content)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content</span><br><span class="line">            .foregroundColor(<span class="type">Color</span>.white)</span><br><span class="line">            .font(.system(size: <span class="keyword">self</span>.size ))</span><br><span class="line">            .padding(.vertical,<span class="number">5</span>)</span><br><span class="line">            .padding(.horizontal,<span class="number">14</span>)</span><br><span class="line">            .background(<span class="keyword">self</span>.backgroundColor)</span><br><span class="line">            .overlay(</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">5</span>)</span><br><span class="line">                    .strokeBorder(style: <span class="type">StrokeStyle</span>(lineWidth:<span class="number">1</span>))</span><br><span class="line">                    .foregroundColor(<span class="type">Color</span>(.sRGB, red: <span class="number">0.1</span>, green: <span class="number">0.1</span>, blue: <span class="number">0.1</span>, opacity: <span class="number">1</span>)))</span><br><span class="line">            .cornerRadius(<span class="number">5</span>)</span><br><span class="line">            .shadow(radius: <span class="number">5</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ContentView</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按钮效果如图：</p><img src="/.io//04/10/SwiftUI-custome-modifier/01.jpg" class><blockquote><p>更多参考资料：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;7sosLx-wzBE</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;如何实现&quot;&gt;&lt;a href=&quot;#如何实现&quot; class=&quot;headerlink&quot; title=&quot;如何实现&quot;&gt;&lt;/a&gt;如何实现&lt;/h3&gt;&lt;p&gt;1、首先创建自定义modifer &lt;code&gt;CustomTextBorder&lt;/code&gt;， 需要让结构提继承 &lt;code
      
    
    </summary>
    
    
    
      <category term="SwiftUI, Swift" scheme="http://tttyyyzzz2020.ghthub.io/tags/SwiftUI-Swift/"/>
    
  </entry>
  
  <entry>
    <title>使用@PropertyWrapper创建自定义属性包装器</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/03/14/SwiftUI-PropertyWrapper/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/03/14/SwiftUI-PropertyWrapper/</id>
    <published>2020-03-14T10:06:37.000Z</published>
    <updated>2020-08-30T02:55:09.296Z</updated>
    
    <content type="html"><![CDATA[<h2 id="PropertyWrapper的简述"><a href="#PropertyWrapper的简述" class="headerlink" title="@PropertyWrapper的简述"></a>@PropertyWrapper的简述</h2><blockquote><p><code>@PropertyWrapper</code>的主要作用，是可以对在原始的属性变量，添加一个分离层，使得对属性的获取和设置更细微自由， 从而移除一些重复或类似的代码。</p></blockquote><p> 在swiftUI中，已经有很多定义好的包装器了。</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> @<span class="type">State</span>.</span><br><span class="line"> <span class="comment">//可以将属性绑定到view视图，实现与界面实时响应</span></span><br><span class="line"> @<span class="type">Binding</span>.</span><br><span class="line"><span class="comment">//可以将父级的属性通过$传输绑定到子级</span></span><br><span class="line"> @<span class="type">ObservedObject</span>.</span><br><span class="line"><span class="comment">//和@State类同，但它绑定的值是需要继承自ObservableObject协议，且必须为类的方式实现，其中@Publisehd 修饰的属性将会与view视图同步响应</span></span><br><span class="line"> @<span class="type">Published</span>.</span><br><span class="line"><span class="comment">//定义在ObservableObject的类中，它包装的属性，在值变化的时候就会调用objectWillChange方法发出通知</span></span><br><span class="line"> @<span class="type">EnvironmentObject</span>.</span><br><span class="line"><span class="comment">//与 @ObservedObject相似，但它可以使得多个视图之间共享数据，而无需通过属性逐级传递</span></span><br><span class="line"> @<span class="type">Environment</span>.</span><br><span class="line"><span class="comment">//可以注入系统本省的环紧信息，如设备信息，主题色，布局，视图尺寸</span></span><br></pre></td></tr></table></figure><p>除了使用系统提供的包转器，我们也可以自行定义属性包装器。</p><h2 id="自定义一个属性包装器"><a href="#自定义一个属性包装器" class="headerlink" title="自定义一个属性包装器"></a>自定义一个属性包装器</h2><p> 主要的步骤如下</p><p> 1.用<code>@propertyWrapper</code>修饰一个<code>struct,class</code>或<code>enum</code><br> 2.定义一个<code>wrappedValue</code>属性并实现它的<code>getter</code>和<code>setter</code>方法，完成我们想要的逻辑<br> 3.还可以自行定义一个初始化方法，来对<code>wrappedValue</code>进行初始化设置<br> 4.也可以创建一个可选的<code>projectedValue</code>属性映射， 如果要获取它关联的值需要使用$符号<br> 5.使用属性包装的语法是加上<code>@</code>符号接上包装器名称</p><h4 id="栗子1-转大写的包装器-Uppercased"><a href="#栗子1-转大写的包装器-Uppercased" class="headerlink" title="栗子1: 转大写的包装器@Uppercased"></a>栗子1: 转大写的包装器<code>@Uppercased</code></h4><blockquote><p>创建一个<code>@Uppercased</code>的包装器， 功能是将存的值转为大写</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@propertyWrapper</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Uppercased</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; text.uppercased() &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; text = newValue &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(wrappedValue: <span class="type">String</span>)  &#123;</span><br><span class="line">        <span class="keyword">self</span>.text = wrappedValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    @<span class="type">Uppercased</span> <span class="keyword">var</span> username: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="type">User</span>(username: <span class="string">"alfianlo"</span>)</span><br><span class="line"><span class="built_in">print</span>(user.username) <span class="comment">// ALFIANLO</span></span><br></pre></td></tr></table></figure><p>代码说明：</p><blockquote><ol><li>在<code>@Uppercased</code>包装器中真正存值的是<code>text</code>属性</li><li>而我们访问和操作的都是<code>wrappedValue</code>， 在获取时候会将<code>text</code>的值转大写后返回</li><li>在包装器初始化时候我们会设置text的值</li><li>在User中使用<code>@Uppercased</code>包装了<code>username</code>,所以<code>username</code>的值在获取时候就会转为大写</li></ol></blockquote><h4 id="栗子2-限定数值大小的包装器-Ranged"><a href="#栗子2-限定数值大小的包装器-Ranged" class="headerlink" title="栗子2: 限定数值大小的包装器@Ranged"></a>栗子2: 限定数值大小的包装器<code>@Ranged</code></h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@propertyWrapper</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Ranged</span>&lt;<span class="title">T</span>: <span class="title">Comparable</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> minimum: <span class="type">T</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> maximum: <span class="type">T</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> value: <span class="type">T</span></span><br><span class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; value &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> newValue &gt; maximum &#123;</span><br><span class="line">                value = maximum</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> newValue &lt; minimum &#123;</span><br><span class="line">                value = minimum</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                value = newValue</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(wrappedValue: <span class="type">T</span>, minimum: <span class="type">T</span>, maximum: <span class="type">T</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.minimum = minimum</span><br><span class="line">        <span class="keyword">self</span>.maximum = maximum</span><br><span class="line">        <span class="keyword">self</span>.value = wrappedValue</span><br><span class="line">        <span class="keyword">self</span>.wrappedValue = wrappedValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Form</span> </span>&#123;</span><br><span class="line">    @<span class="type">Ranged</span>(minimum: <span class="number">17</span>, maximum: <span class="number">65</span>) <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> form = <span class="type">Form</span>()</span><br><span class="line">form.age = <span class="number">100</span> <span class="comment">// 65</span></span><br><span class="line">form.age = <span class="number">2</span> <span class="comment">// 17</span></span><br></pre></td></tr></table></figure><p>代码说明：</p><blockquote><p>1.<code>@Ranged</code>包装器的功能是限定属性取值的最大和最小值。<br>2.包装器的<code>init</code>方法接收了2个参数，这样在使用时就可以灵活控制取值的范围。</p></blockquote><h4 id="栗子3-包装器值的映射"><a href="#栗子3-包装器值的映射" class="headerlink" title="栗子3: 包装器值的映射"></a>栗子3: 包装器值的映射</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@propertyWrapper</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ISO8601DateFormatted</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">let</span> formatter = <span class="type">ISO8601DateFormatter</span>()</span><br><span class="line">    <span class="keyword">var</span> projectedValue: <span class="type">String</span> &#123; <span class="type">ISO8601DateFormatted</span>.formatter.string(from: wrappedValue) &#125;</span><br><span class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">Date</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Form</span> </span>&#123;</span><br><span class="line">    @<span class="type">ISO8601DateFormatted</span> <span class="keyword">var</span> lastLoginAt: <span class="type">Date</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="type">Form</span>(lastLoginAt: <span class="type">Date</span>())</span><br><span class="line"><span class="built_in">print</span>(user.$lastLoginAt) <span class="comment">// "2020-07-11T10:54:42Z"</span></span><br></pre></td></tr></table></figure><blockquote><p>上面的的包装器中我们添加加的<code>projectedValue</code>作为映射, 当需要访问<code>wrappedValue</code>可以通过<code>$</code>加上属性名的方式访问处理后的值， 在这个的栗子我们在读取<code>warppedValue</code>存储的日期时后，都会经过<code>ISO8601DateFormatter</code>的格式化处理</p></blockquote><h4 id="栗子4-本地存储包装器-UserDefault"><a href="#栗子4-本地存储包装器-UserDefault" class="headerlink" title="栗子4: 本地存储包装器@UserDefault"></a>栗子4: 本地存储包装器<code>@UserDefault</code></h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@propertyWrapper</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UserDefault</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> key: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> initialValue: <span class="type">T</span></span><br><span class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">set</span> &#123; <span class="type">UserDefaults</span>.standard.<span class="keyword">set</span>(newValue, forKey: key) &#125;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="type">UserDefaults</span>.standard.object(forKey: key) <span class="keyword">as</span>? <span class="type">T</span> ?? initialValue &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UserPreferences</span> </span>&#123;</span><br><span class="line">    @<span class="type">UserDefault</span>(key: <span class="string">"isCheatModeEnabled"</span>, initialValue: <span class="literal">false</span>) <span class="keyword">static</span> <span class="keyword">var</span> isCheatModeEnabled: <span class="type">Bool</span></span><br><span class="line">    @<span class="type">UserDefault</span>(key: <span class="string">"highestScore"</span>, initialValue: <span class="number">10000</span>) <span class="keyword">static</span> <span class="keyword">var</span> highestScore: <span class="type">Int</span></span><br><span class="line">    @<span class="type">UserDefault</span>(key: <span class="string">"nickname"</span>, initialValue: <span class="string">"cloudstrife97"</span>) <span class="keyword">static</span> <span class="keyword">var</span> nickname: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">UserPreferences</span>.isCheatModeEnabled = <span class="literal">true</span></span><br><span class="line"><span class="type">UserPreferences</span>.highestScore = <span class="number">25000</span></span><br><span class="line"><span class="type">UserPreferences</span>.nickname = <span class="string">"squallleonhart"</span></span><br></pre></td></tr></table></figure><blockquote><p>最后这个栗子， 是一个使用属性包装器简化不同类型数据本地存储的代码。使用<code>@UserDefault</code>修饰过的属性，在获取和设置时都会同步保存在本地存储中。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;PropertyWrapper的简述&quot;&gt;&lt;a href=&quot;#PropertyWrapper的简述&quot; class=&quot;headerlink&quot; title=&quot;@PropertyWrapper的简述&quot;&gt;&lt;/a&gt;@PropertyWrapper的简述&lt;/h2&gt;&lt;blockq
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用@autoclosure 自动闭包，简化函数调用的语法</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/02/12/SwiftUI-autoclosures/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/02/12/SwiftUI-autoclosures/</id>
    <published>2020-02-12T04:25:56.000Z</published>
    <updated>2020-08-30T02:53:07.557Z</updated>
    
    <content type="html"><![CDATA[<h2 id="autoclosure主要用处"><a href="#autoclosure主要用处" class="headerlink" title="@autoclosure主要用处"></a>@autoclosure主要用处</h2><blockquote></blockquote><p>1、<code>@autoclosure</code> 自动闭包，主要的作用是可以简化书写的语法。<br>2、<code>@autoclosure</code> 修饰的闭包函数，可以直接以参数调用自动展开，而不再需要显示的创建闭包。<br>3、<code>@autoclosure</code> 修饰的闭包只能是参数，但其本身是不能带有参数的。</p><blockquote><p>普通闭包参数</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">logIftrue</span><span class="params">(<span class="number">_</span> predicate:<span class="params">()</span></span></span> -&gt; <span class="type">Bool</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> predicate() &#123;</span><br><span class="line">        <span class="built_in">print</span>(#function)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logIftrue&#123; <span class="number">1</span> &lt; <span class="number">2</span> &#125;   <span class="comment">//显示调用方式</span></span><br></pre></td></tr></table></figure><blockquote><p><code>@autoclosure</code>修饰的闭包参数</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">logIfTrueWithAutoclosure</span><span class="params">(<span class="number">_</span> predicate: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">Bool</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> predicate() &#123;</span><br><span class="line">        <span class="built_in">print</span>(#function)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logIfTrueWithAutoclosure( <span class="number">1</span> &lt; <span class="number">2</span> )   <span class="comment">//以参数调用方式</span></span><br></pre></td></tr></table></figure><blockquote><p>在这<code>logIfTrueWithAutoclosure</code>函数中，参数<code>predicate</code>本是一个闭包函数，但现在我毋需显示创建闭包体。可以只书写函数体表达式或者返回值，只需确保类型为<code>Bool</code>即可</p></blockquote><h2 id="Swift标准库中-autoclosure-应用"><a href="#Swift标准库中-autoclosure-应用" class="headerlink" title="Swift标准库中 @autoclosure 应用"></a>Swift标准库中 @autoclosure 应用</h2><blockquote><p>Swift中的闭包具有延时调用的特性，也就是说在需要求值时才运算,所以我们可以看下??运算符的实现，它其中的 <code>defaultValue</code> 参数只在第一个参数<code>nil</code>才进行运算求值。其次用了<code>@autoclosure</code>修饰，使得可以隐式调用闭包获取值，书写语法也变得更为简洁  <code>a ?? 1</code></p></blockquote><pre><code class="swift"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> ?? &lt;T&gt;<span class="params">(<span class="keyword">optional</span>: T?, defaultValue: @autoclosure <span class="params">()</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">T</span>)    <span class="keyword">rethrows</span> -&gt; <span class="type">T</span> {        <span class="keyword">switch</span> <span class="keyword">optional</span> {        <span class="keyword">case</span> .some(<span class="keyword">let</span> value):            <span class="keyword">return</span> value        <span class="keyword">case</span> .<span class="keyword">none</span>:            <span class="keyword">return</span> <span class="keyword">try</span> defaultValue()        }}</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;autoclosure主要用处&quot;&gt;&lt;a href=&quot;#autoclosure主要用处&quot; class=&quot;headerlink&quot; title=&quot;@autoclosure主要用处&quot;&gt;&lt;/a&gt;@autoclosure主要用处&lt;/h2&gt;&lt;blockquote&gt;
&lt;/bloc
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>info.plist 功能对照表</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2020/01/08/info.plist%20%E5%AF%B9%E7%85%A7%E8%A1%A8/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2020/01/08/info.plist%20%E5%AF%B9%E7%85%A7%E8%A1%A8/</id>
    <published>2020-01-08T02:18:40.000Z</published>
    <updated>2020-08-30T02:43:36.360Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加自定义字体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>UIAppFonts<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>PatuaOne-Regular.ttf<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 允许https请求 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAppTransportSecurity<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAllowsArbitraryLoads<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>【ES6】数组方法大全</title>
    <link href="http://tttyyyzzz2020.ghthub.io/2017/08/12/ES6-Array/"/>
    <id>http://tttyyyzzz2020.ghthub.io/2017/08/12/ES6-Array/</id>
    <published>2017-08-12T04:25:56.000Z</published>
    <updated>2020-08-30T02:57:24.150Z</updated>
    
    <content type="html"><![CDATA[<h3 id="方法集合"><a href="#方法集合" class="headerlink" title="方法集合"></a>方法集合</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from()               </span><br><span class="line"><span class="built_in">Array</span>.isArray()</span><br><span class="line"><span class="built_in">Array</span>.of()</span><br><span class="line"><span class="built_in">Array</span>.prototype.concat() </span><br><span class="line"><span class="built_in">Array</span>.prototype.copyWithin()</span><br><span class="line"><span class="built_in">Array</span>.prototype.entries()</span><br><span class="line"><span class="built_in">Array</span>.prototype.every()</span><br><span class="line"><span class="built_in">Array</span>.prototype.fill()     </span><br><span class="line"><span class="built_in">Array</span>.prototype.filter()</span><br><span class="line"><span class="built_in">Array</span>.prototype.find()</span><br><span class="line"><span class="built_in">Array</span>.prototype.findIndex()</span><br><span class="line"><span class="built_in">Array</span>.prototype.flatMap()</span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach()</span><br><span class="line"><span class="built_in">Array</span>.prototype.includes()</span><br><span class="line"><span class="built_in">Array</span>.prototype.indexOf()</span><br><span class="line"><span class="built_in">Array</span>.prototype.join()</span><br><span class="line"><span class="built_in">Array</span>.prototype.keys()</span><br><span class="line"><span class="built_in">Array</span>.prototype.lastIndexOf()</span><br><span class="line"><span class="built_in">Array</span>.prototype.map()</span><br><span class="line"><span class="built_in">Array</span>.prototype.pop()</span><br><span class="line"><span class="built_in">Array</span>.prototype.push()</span><br><span class="line"><span class="built_in">Array</span>.prototype.reduce()</span><br><span class="line"><span class="built_in">Array</span>.prototype.reduceRight()</span><br><span class="line"><span class="built_in">Array</span>.prototype.reverse()</span><br><span class="line"><span class="built_in">Array</span>.prototype.shift()</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice()</span><br><span class="line"><span class="built_in">Array</span>.prototype.some()</span><br><span class="line"><span class="built_in">Array</span>.prototype.sort()</span><br><span class="line"><span class="built_in">Array</span>.prototype.splice()</span><br><span class="line"><span class="built_in">Array</span>.prototype.toLocaleString()</span><br><span class="line"><span class="built_in">Array</span>.prototype.toSource()</span><br><span class="line"><span class="built_in">Array</span>.prototype.toString()</span><br><span class="line"><span class="built_in">Array</span>.prototype.unshift()</span><br><span class="line"><span class="built_in">Array</span>.prototype.values()</span><br></pre></td></tr></table></figure><p>MDN网址：</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array</a></p><h1 id="数组创建"><a href="#数组创建" class="headerlink" title="数组创建"></a>数组创建</h1><h3 id="Array-from-类似数组转数组"><a href="#Array-from-类似数组转数组" class="headerlink" title="Array.from 类似数组转数组"></a>Array.from 类似数组转数组</h3><blockquote><p>方法从一个类似数组或可迭代对象创建一个新的，浅拷贝的数组实例。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(<span class="string">'foo'</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["f", "o", "o"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x + x));</span><br><span class="line"><span class="comment">// expected output: Array [2, 4, 6]</span></span><br></pre></td></tr></table></figure><h3 id="Array-of-构建数组"><a href="#Array-of-构建数组" class="headerlink" title="Array.of 构建数组"></a>Array.of 构建数组</h3><blockquote><p>方法创建一个具有可变数量参数的新数组实例，而不考虑参数的数量或类型。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">7</span>);       <span class="comment">// [7] </span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">7</span>);          <span class="comment">// [ , , , , , , ]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);    <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h3 id="fill-数组填充，可指定填充位置"><a href="#fill-数组填充，可指定填充位置" class="headerlink" title="fill 数组填充，可指定填充位置"></a>fill 数组填充，可指定填充位置</h3><blockquote><p>方法用一个固定值填充一个数组中从起始索引到终止索引内的全部元素。不包括终止索引。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 0 from position 2 until position 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 2, 0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 5 from position 1</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">5</span>, <span class="number">1</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 5, 5, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">6</span>));</span><br><span class="line"><span class="comment">// expected output: [6, 6, 6, 6]</span></span><br></pre></td></tr></table></figure><h3 id="concat-合并数组"><a href="#concat-合并数组" class="headerlink" title="concat 合并数组"></a>concat 合并数组</h3><blockquote><p> 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">const</span> array2 = [<span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>];</span><br><span class="line"><span class="keyword">const</span> array3 = array1.concat(array2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array3);</span><br><span class="line"><span class="comment">// expected output: Array ["a", "b", "c", "d", "e", "f"]</span></span><br></pre></td></tr></table></figure><h3 id="copyWithin-浅复制数组元素"><a href="#copyWithin-浅复制数组元素" class="headerlink" title="copyWithin 浅复制数组元素"></a>copyWithin 浅复制数组元素</h3><blockquote><p>方法浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// copy to index 0 the element at index 3</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["d", "b", "c", "d", "e"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// copy to index 1 all elements from index 3 to the end</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.copyWithin(<span class="number">1</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["d", "d", "e", "d", "e"]</span></span><br></pre></td></tr></table></figure><h1 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h1><h3 id="forEach-遍历数组-不可中止"><a href="#forEach-遍历数组-不可中止" class="headerlink" title="forEach 遍历数组,不可中止"></a>forEach 遍历数组,不可中止</h3><blockquote><p>方法对数组的每个元素执行一次给定的函数。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line">array1.forEach(<span class="function"><span class="params">element</span> =&gt;</span> <span class="built_in">console</span>.log(element));</span><br><span class="line"></span><br><span class="line"><span class="comment">// expected output: "a"</span></span><br><span class="line"><span class="comment">// expected output: "b"</span></span><br><span class="line"><span class="comment">// expected output: "c"</span></span><br></pre></td></tr></table></figure><h3 id="keys-键名迭代器"><a href="#keys-键名迭代器" class="headerlink" title="keys 键名迭代器"></a>keys 键名迭代器</h3><blockquote><p> 方法返回一个包含数组中每个索引键的Array Iterator对象。</p></blockquote><blockquote><p>返回值可以被for遍历，但并不是数组。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, , <span class="string">"c"</span>];</span><br><span class="line"><span class="keyword">var</span> sparseKeys = <span class="built_in">Object</span>.keys(arr);</span><br><span class="line"><span class="keyword">var</span> denseKeys = [...arr.keys()];</span><br><span class="line"><span class="built_in">console</span>.log(sparseKeys); <span class="comment">// ['0', '2']</span></span><br><span class="line"><span class="built_in">console</span>.log(denseKeys);  <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="values-值数组"><a href="#values-值数组" class="headerlink" title="values 值数组"></a>values 值数组</h3><blockquote><p>方法返回一个新的 Array Iterator 对象，该对象包含数组每个索引的值</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">const</span> iterator = array1.values();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iterator) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// expected output: "a"</span></span><br><span class="line"><span class="comment">// expected output: "b"</span></span><br><span class="line"><span class="comment">// expected output: "c"</span></span><br></pre></td></tr></table></figure><h3 id="entries-数组迭代器-键值对"><a href="#entries-数组迭代器-键值对" class="headerlink" title="entries 数组迭代器(键值对)"></a>entries 数组迭代器(键值对)</h3><blockquote><p>方法返回一个新的Array Iterator对象，该对象包含数组中每个索引的键/值对。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator1 = array1.entries();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator1.next().value);</span><br><span class="line"><span class="comment">// expected output: Array [0, "a"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator1.next().value);</span><br><span class="line"><span class="comment">// expected output: Array [1, "b"]</span></span><br></pre></td></tr></table></figure><h1 id="数组索引，元素查找"><a href="#数组索引，元素查找" class="headerlink" title="数组索引，元素查找"></a>数组索引，元素查找</h1><h3 id="find-查找元素-未找到返回undefined"><a href="#find-查找元素-未找到返回undefined" class="headerlink" title="find 查找元素, 未找到返回undefined"></a>find 查找元素, 未找到返回undefined</h3><blockquote><p>方法返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">5</span>, <span class="number">12</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> found = array1.find(<span class="function"><span class="params">element</span> =&gt;</span> element &gt; <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(found);</span><br><span class="line"><span class="comment">// expected output: 12</span></span><br></pre></td></tr></table></figure><h3 id="findIndex-查找索引-未找到返回-1"><a href="#findIndex-查找索引-未找到返回-1" class="headerlink" title="findIndex 查找索引, 未找到返回-1"></a>findIndex 查找索引, 未找到返回-1</h3><blockquote><p>参数：是一个检测函数</p></blockquote><blockquote><p>方法返回数组中满足提供的测试函数的第一个元素的索引。若没有找到对应元素则返回-1。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">5</span>, <span class="number">12</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isLargeNumber = <span class="function">(<span class="params">element</span>) =&gt;</span> element &gt; <span class="number">13</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.findIndex(isLargeNumber));</span><br><span class="line"><span class="comment">// expected output: 3</span></span><br></pre></td></tr></table></figure><h3 id="indexOf-查找索引，未找到返回-1"><a href="#indexOf-查找索引，未找到返回-1" class="headerlink" title="indexOf 查找索引，未找到返回-1"></a>indexOf 查找索引，未找到返回-1</h3><blockquote><p>参数：第一个是要找的元素，第二个是开始的索引。</p></blockquote><blockquote><p>方法返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1。</p></blockquote><blockquote><p>和findIndex的区别是，该方法需要提前知道要查找的元素。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> beasts = [<span class="string">'ant'</span>, <span class="string">'bison'</span>, <span class="string">'camel'</span>, <span class="string">'duck'</span>, <span class="string">'bison'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(beasts.indexOf(<span class="string">'bison'</span>));</span><br><span class="line"><span class="comment">// expected output: 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// start from index 2</span></span><br><span class="line"><span class="built_in">console</span>.log(beasts.indexOf(<span class="string">'bison'</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">// expected output: 4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(beasts.indexOf(<span class="string">'giraffe'</span>));</span><br><span class="line"><span class="comment">// expected output: -1</span></span><br></pre></td></tr></table></figure><h3 id="lastIndexOf-查找索引，未找到返回-1-从后往前找"><a href="#lastIndexOf-查找索引，未找到返回-1-从后往前找" class="headerlink" title="lastIndexOf  查找索引，未找到返回-1  (从后往前找)"></a>lastIndexOf  查找索引，未找到返回-1  (从后往前找)</h3><blockquote><p>用法： 与indexOf 相同</p></blockquote><blockquote><p>lastIndexOf() 方法返回指定元素（也即有效的 JavaScript 值或变量）在数组中的最后一个的索引，如果不存在则返回 -1。从数组的后面向前查找，从 fromIndex 处开始。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const animals &#x3D; [&#39;Dodo&#39;, &#39;Tiger&#39;, &#39;Penguin&#39;, &#39;Dodo&#39;];</span><br><span class="line"></span><br><span class="line">console.log(animals.lastIndexOf(&#39;Dodo&#39;));</span><br><span class="line">&#x2F;&#x2F; expected output: 3</span><br><span class="line"></span><br><span class="line">console.log(animals.lastIndexOf(&#39;Tiger&#39;));</span><br><span class="line">&#x2F;&#x2F; expected output: 1</span><br></pre></td></tr></table></figure><h1 id="数组添加删除"><a href="#数组添加删除" class="headerlink" title="数组添加删除"></a>数组添加删除</h1><h3 id="pop-删除最后一个-并返回该元素的值"><a href="#pop-删除最后一个-并返回该元素的值" class="headerlink" title="pop 删除最后一个, 并返回该元素的值"></a>pop 删除最后一个, 并返回该元素的值</h3><blockquote><p>方法从数组中删除最后一个元素，并返回该元素的值。此方法更改数组的长度。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> plants = [<span class="string">'broccoli'</span>, <span class="string">'cauliflower'</span>, <span class="string">'cabbage'</span>, <span class="string">'kale'</span>, <span class="string">'tomato'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(plants.pop());</span><br><span class="line"><span class="comment">// expected output: "tomato"</span></span><br></pre></td></tr></table></figure><h3 id="push-在末位添加-返回该数组的新长度。"><a href="#push-在末位添加-返回该数组的新长度。" class="headerlink" title="push 在末位添加, 返回该数组的新长度。"></a>push 在末位添加, 返回该数组的新长度。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> animals = [<span class="string">'pigs'</span>, <span class="string">'goats'</span>, <span class="string">'sheep'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = animals.push(<span class="string">'cows'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(count);</span><br><span class="line"><span class="comment">// expected output: 4</span></span><br><span class="line"><span class="built_in">console</span>.log(animals);</span><br><span class="line"><span class="comment">// expected output: Array ["pigs", "goats", "sheep", "cows"]</span></span><br><span class="line"></span><br><span class="line">animals.push(<span class="string">'chickens'</span>, <span class="string">'cats'</span>, <span class="string">'dogs'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(animals);</span><br><span class="line"><span class="comment">// expected output: Array ["pigs", "goats", "sheep", "cows", "chickens", "cats", "dogs"]</span></span><br></pre></td></tr></table></figure><h3 id="shift-删除第一个-并返回该元素的值"><a href="#shift-删除第一个-并返回该元素的值" class="headerlink" title="shift 删除第一个, 并返回该元素的值"></a>shift 删除第一个, 并返回该元素的值</h3><blockquote><p>方法从数组中删除第一个元素，并返回该元素的值。此方法更改数组的长度。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> firstElement = array1.shift();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(firstElement);</span><br><span class="line"><span class="comment">// expected output: 1</span></span><br></pre></td></tr></table></figure><h3 id="unshift-头部添加元素，并返回长度"><a href="#unshift-头部添加元素，并返回长度" class="headerlink" title="unshift 头部添加元素，并返回长度"></a>unshift 头部添加元素，并返回长度</h3><blockquote><p>方法将一个或多个元素添加到数组的开头，并返回该数组的新长度(该方法修改原有数组)。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.unshift(<span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 5</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [4, 5, 1, 2, 3]</span></span><br></pre></td></tr></table></figure><h3 id="slice-浅拷贝-数组切片，-不改变原数组"><a href="#slice-浅拷贝-数组切片，-不改变原数组" class="headerlink" title="slice  浅拷贝 数组切片， 不改变原数组"></a>slice  浅拷贝 数组切片， 不改变原数组</h3><blockquote><p>slice() 方法返回一个新的数组对象，这一对象是一个由 begin 和 end 决定的原数组的浅拷贝（包括 begin，不包括end）。原始数组不会被改变。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> animals = [<span class="string">'ant'</span>, <span class="string">'bison'</span>, <span class="string">'camel'</span>, <span class="string">'duck'</span>, <span class="string">'elephant'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(animals.slice(<span class="number">2</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["camel", "duck", "elephant"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(animals.slice(<span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["camel", "duck"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(animals.slice(<span class="number">1</span>, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["bison", "camel", "duck", "elephant"]</span></span><br></pre></td></tr></table></figure><h3 id="splice-删除，替换，或原地添加新元素"><a href="#splice-删除，替换，或原地添加新元素" class="headerlink" title="splice 删除，替换，或原地添加新元素"></a>splice 删除，替换，或原地添加新元素</h3><blockquote><p>方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> months = [<span class="string">'Jan'</span>, <span class="string">'March'</span>, <span class="string">'April'</span>, <span class="string">'June'</span>];</span><br><span class="line">months.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">'Feb'</span>);</span><br><span class="line"><span class="comment">// inserts at index 1</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Jan", "Feb", "March", "April", "June"]</span></span><br><span class="line"></span><br><span class="line">months.splice(<span class="number">4</span>, <span class="number">1</span>, <span class="string">'May'</span>);</span><br><span class="line"><span class="comment">// replaces 1 element at index 4</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Jan", "Feb", "March", "April", "May"]</span></span><br></pre></td></tr></table></figure><h1 id="数组判断"><a href="#数组判断" class="headerlink" title="数组判断"></a>数组判断</h1><h3 id="isArray-判断是否为数组"><a href="#isArray-判断是否为数组" class="headerlink" title="isArray 判断是否为数组"></a>isArray 判断是否为数组</h3><blockquote><p>用于确定传递的值是否是一个 Array。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);  </span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123;<span class="attr">foo</span>: <span class="number">123</span>&#125;); </span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="string">"foobar"</span>);   </span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">undefined</span>);  </span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="every-数组的每一项都通过检测，则为true"><a href="#every-数组的每一项都通过检测，则为true" class="headerlink" title="every 数组的每一项都通过检测，则为true"></a>every 数组的每一项都通过检测，则为true</h3><blockquote><p>方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBelowThreshold = <span class="function">(<span class="params">currentValue</span>) =&gt;</span> currentValue &lt; <span class="number">40</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">39</span>, <span class="number">29</span>, <span class="number">10</span>, <span class="number">13</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.every(isBelowThreshold));</span><br><span class="line"><span class="comment">// expected output: true</span></span><br></pre></td></tr></table></figure><h3 id="some-只要数组的某一项通过检测，则为true"><a href="#some-只要数组的某一项通过检测，则为true" class="headerlink" title="some 只要数组的某一项通过检测，则为true"></a>some 只要数组的某一项通过检测，则为true</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// checks whether an element is even</span></span><br><span class="line"><span class="keyword">const</span> even = <span class="function">(<span class="params">element</span>) =&gt;</span> element % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array.some(even));</span><br><span class="line"><span class="comment">// expected output: true</span></span><br></pre></td></tr></table></figure><h3 id="includes-数组包含某个值，则为true"><a href="#includes-数组包含某个值，则为true" class="headerlink" title="includes 数组包含某个值，则为true"></a>includes 数组包含某个值，则为true</h3><blockquote><p>方法用来判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 true，否则返回false。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>);     <span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>);     <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>);  <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">-1</span>); <span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>].includes(<span class="literal">NaN</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例： 通用的includes() 判断arguments</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log([].includes.call(<span class="built_in">arguments</span>, <span class="string">'a'</span>)); <span class="comment">// true</span></span><br><span class="line">  <span class="built_in">console</span>.log([].includes.call(<span class="built_in">arguments</span>, <span class="string">'d'</span>)); <span class="comment">// false</span></span><br><span class="line">&#125;)(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>);</span><br></pre></td></tr></table></figure><h1 id="过滤和转化"><a href="#过滤和转化" class="headerlink" title="过滤和转化"></a>过滤和转化</h1><h3 id="fileter-筛选过滤数组"><a href="#fileter-筛选过滤数组" class="headerlink" title="fileter 筛选过滤数组"></a>fileter 筛选过滤数组</h3><blockquote><p>方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = [<span class="string">'spray'</span>, <span class="string">'limit'</span>, <span class="string">'elite'</span>, <span class="string">'exuberant'</span>, <span class="string">'destruction'</span>, <span class="string">'present'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = words.filter(<span class="function"><span class="params">word</span> =&gt;</span> word.length &gt; <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// expected output: Array ["exuberant", "destruction", "present"]</span></span><br></pre></td></tr></table></figure><h3 id="map-遍历数组，函数返回值作为新的数组"><a href="#map-遍历数组，函数返回值作为新的数组" class="headerlink" title="map 遍历数组，函数返回值作为新的数组"></a>map 遍历数组，函数返回值作为新的数组</h3><blockquote><p>方法创建一个新数组，其结果是该数组中的每个元素是调用一次提供的函数后的返回值。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// pass a function to map</span></span><br><span class="line"><span class="keyword">const</span> map1 = array1.map(<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map1);</span><br><span class="line"><span class="comment">// expected output: Array [2, 8, 18, 32]</span></span><br></pre></td></tr></table></figure><h3 id="flat-递归展开数组"><a href="#flat-递归展开数组" class="headerlink" title="flat() 递归展开数组"></a>flat() 递归展开数组</h3><blockquote><p>方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr1.flat());</span><br><span class="line"><span class="comment">// expected output: [0, 1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, [[[<span class="number">3</span>, <span class="number">4</span>]]]];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2.flat(<span class="number">2</span>));</span><br><span class="line"><span class="comment">// expected output: [0, 1, 2, [3, 4]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例： 使用 Infinity，可展开任意深度的嵌套数组</span></span><br><span class="line"><span class="keyword">var</span> arr4 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>, [<span class="number">7</span>, <span class="number">8</span>, [<span class="number">9</span>, <span class="number">10</span>]]]]];</span><br><span class="line">arr4.flat(<span class="literal">Infinity</span>);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例： 会去除空的选项</span></span><br><span class="line"><span class="keyword">var</span> arr4 = [<span class="number">1</span>, <span class="number">2</span>, , <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr4.flat();</span><br><span class="line"><span class="comment">// [1, 2, 4, 5]111</span></span><br></pre></td></tr></table></figure><h3 id="flatMap-深度为1展开数组，返回值组成新数组。"><a href="#flatMap-深度为1展开数组，返回值组成新数组。" class="headerlink" title="flatMap() 深度为1展开数组，返回值组成新数组。"></a>flatMap() 深度为1展开数组，返回值组成新数组。</h3><blockquote><p>是flat(1) 和 map() 的结合,利用返回[], 可动态控制数组长度<br>一个新的数组，其中每个元素都是回调函数的结果，并且结构深度 depth 值为1。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">arr1.map(<span class="function"><span class="params">x</span> =&gt;</span> [x * <span class="number">2</span>]); </span><br><span class="line"><span class="comment">// [[2], [4], [6], [8]]</span></span><br><span class="line"></span><br><span class="line">arr1.flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [x * <span class="number">2</span>]);</span><br><span class="line"><span class="comment">// [2, 4, 6, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// only one level is flattened</span></span><br><span class="line">arr1.flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [[x * <span class="number">2</span>]]);</span><br><span class="line"><span class="comment">// [[2], [4], [6], [8]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例： 拆分数组中的单词</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">"it's Sunny in"</span>, <span class="string">""</span>, <span class="string">"California"</span>];</span><br><span class="line"></span><br><span class="line">arr1.map(<span class="function"><span class="params">x</span> =&gt;</span> x.split(<span class="string">" "</span>));</span><br><span class="line"><span class="comment">// [["it's","Sunny","in"],[""],["California"]]</span></span><br><span class="line"></span><br><span class="line">arr1.flatMap(<span class="function"><span class="params">x</span> =&gt;</span> x.split(<span class="string">" "</span>));</span><br><span class="line"><span class="comment">// ["it's","Sunny","in", "", "California"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例： 动态控制元素数量</span></span><br><span class="line"><span class="comment">// Let's say we want to remove all the negative numbers and split the odd numbers into an even number and a 1</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">-3</span>, <span class="number">20</span>, <span class="number">17</span>, <span class="number">-33</span>, <span class="number">-4</span>, <span class="number">18</span>]</span><br><span class="line"><span class="comment">//       |\  \  x   |  | \   x   x   |</span></span><br><span class="line"><span class="comment">//      [4,1, 4,   20, 16, 1,       18]</span></span><br><span class="line"></span><br><span class="line">a.flatMap( <span class="function">(<span class="params">n</span>) =&gt;</span></span><br><span class="line">  (n &lt; <span class="number">0</span>) ?      [] :</span><br><span class="line">  (n % <span class="number">2</span> == <span class="number">0</span>) ? [n] :</span><br><span class="line">                 [n<span class="number">-1</span>, <span class="number">1</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// expected output: [4, 1, 4, 20, 16, 1, 18]</span></span><br></pre></td></tr></table></figure><h3 id="reduce-遍历数组，用函数累计升阶，并汇总结果"><a href="#reduce-遍历数组，用函数累计升阶，并汇总结果" class="headerlink" title="reduce 遍历数组，用函数累计升阶，并汇总结果"></a>reduce 遍历数组，用函数累计升阶，并汇总结果</h3><blockquote><p>[0, 1, 2, 3, 4].reduce(function(accumulator, currentValue, currentIndex, array){<br>  return accumulator + currentValue;<br>});</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">accumulator, currentValue, currentIndex, array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator + currentValue;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight"></a>reduceRight</h3><blockquote><p>reduceRight() 方法接受一个函数作为累加器（accumulator）和数组的每个值（从右到左）将其减少为单个值。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduceRight(</span><br><span class="line">  (accumulator, currentValue) =&gt; accumulator.concat(currentValue)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [4, 5, 2, 3, 0, 1]</span></span><br></pre></td></tr></table></figure><h1 id="排序和反转"><a href="#排序和反转" class="headerlink" title="排序和反转"></a>排序和反转</h1><h3 id="sort-排序"><a href="#sort-排序" class="headerlink" title="sort 排序"></a>sort 排序</h3><blockquote><p>sort() 方法用原地算法对数组的元素进行排序，并返回数组。默认排序顺序是在将元素转换为字符串，然后比较它们的UTF-16代码单元值序列时构建的</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> months = [<span class="string">'March'</span>, <span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Dec'</span>];</span><br><span class="line">months.sort();</span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Dec", "Feb", "Jan", "March"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.sort();</span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [1, 100000, 21, 30, 4]</span></span><br></pre></td></tr></table></figure><h3 id="reverse-数组反转"><a href="#reverse-数组反转" class="headerlink" title="reverse 数组反转"></a>reverse 数组反转</h3><blockquote><p>reverse() 方法将数组中元素的位置颠倒，并返回该数组。数组的第一个元素会变成最后一个，数组的最后一个元素变成第一个。该方法会改变原数组。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'array1:'</span>, array1);</span><br><span class="line"><span class="comment">// expected output: "array1:" Array ["one", "two", "three"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reversed = array1.reverse();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'reversed:'</span>, reversed);</span><br><span class="line"><span class="comment">// expected output: "reversed:" Array ["three", "two", "one"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Careful: reverse is destructive -- it changes the original array.</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'array1:'</span>, array1);</span><br><span class="line"><span class="comment">// expected output: "array1:" Array ["three", "two", "one"]</span></span><br></pre></td></tr></table></figure><h1 id="数组和字符串"><a href="#数组和字符串" class="headerlink" title="数组和字符串"></a>数组和字符串</h1><h3 id="join-数组转字符串"><a href="#join-数组转字符串" class="headerlink" title="join 数组转字符串"></a>join 数组转字符串</h3><blockquote><p>方法将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串。如果数组只有一个项目，那么将返回该项目而不使用分隔符。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = [<span class="string">'Fire'</span>, <span class="string">'Air'</span>, <span class="string">'Water'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join());</span><br><span class="line"><span class="comment">// expected output: "Fire,Air,Water"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">''</span>));</span><br><span class="line"><span class="comment">// expected output: "FireAirWater"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">'-'</span>));</span><br><span class="line"><span class="comment">// expected output: "Fire-Air-Water"</span></span><br></pre></td></tr></table></figure><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h3><blockquote><p>返回一个字符串，表示指定的数组及其元素。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'a'</span>, <span class="string">'1a'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.toString());</span><br><span class="line"><span class="comment">// expected output: "1,2,a,1a"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;方法集合&quot;&gt;&lt;a href=&quot;#方法集合&quot; class=&quot;headerlink&quot; title=&quot;方法集合&quot;&gt;&lt;/a&gt;方法集合&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
